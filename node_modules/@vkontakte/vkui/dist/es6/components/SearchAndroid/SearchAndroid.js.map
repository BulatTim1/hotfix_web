{"version":3,"sources":["../../../../src/components/SearchAndroid/SearchAndroid.js"],"names":["React","PropTypes","getClassName","classNames","HeaderButton","Icon24Back","Icon24Cancel","Icon24Search","baseClassName","SearchAndroid","props","isControlledOutside","setState","value","onChange","inputEl","focus","e","target","element","getRef","current","state","hasOwnProperty","defaultValue","theme","autoFocus","onClose","inputProps","hasValue","className","context","webviewType","inputRef","onCancel","Component","string","func","onFocus","onBlur","placeholder","node","oneOf","oneOfType","shape","any","bool"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport getClassName from '../../helpers/getClassName';\nimport classNames from '../../lib/classNames';\n\nimport HeaderButton from '../HeaderButton/HeaderButton';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\nimport Icon24Cancel from '@vkontakte/icons/dist/24/cancel';\nimport Icon24Search from '@vkontakte/icons/dist/24/search';\n\nconst baseClassName = getClassName('Search');\n\nexport default class SearchAndroid extends React.Component {\n  constructor (props) {\n    super(props);\n\n    let state = {};\n\n    if (props.hasOwnProperty('value')) {\n      this.isControlledOutside = true;\n    } else {\n      state.value = props.defaultValue || '';\n    }\n\n    this.state = state;\n  }\n\n  static propTypes = {\n    className: PropTypes.string,\n    defaultValue: PropTypes.string,\n    value: PropTypes.string,\n    onChange: PropTypes.func,\n    onFocus: PropTypes.func,\n    onBlur: PropTypes.func,\n    onClose: PropTypes.func,\n    placeholder: PropTypes.node,\n    theme: PropTypes.oneOf(['header', 'default']),\n    getRef: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.shape({ current: PropTypes.any })\n    ]),\n    autoFocus: PropTypes.bool\n  };\n\n  static defaultProps = {\n    placeholder: 'Поиск',\n    theme: 'default',\n    autoFocus: true\n  };\n\n  static contextTypes = {\n    webviewType: PropTypes.oneOf(['vkapps', 'internal'])\n  };\n\n  onCancel = () => {\n    if (!this.isControlledOutside) {\n      this.setState({ value: '' });\n    }\n    if (this.props.onChange) {\n      this.props.onChange('');\n    }\n    this.inputEl.focus();\n  };\n\n  onChange = (e) => {\n    if (!this.isControlledOutside) {\n      this.setState({ value: e.target.value });\n    }\n    if (this.props.onChange) {\n      this.props.onChange(e.target.value, e);\n    }\n  };\n\n  componentDidMount () {\n    this.props.theme === 'header' && this.props.autoFocus && this.inputEl.focus();\n  }\n\n  get value () {\n    return this.isControlledOutside ? this.props.value : this.state.value;\n  }\n\n  inputRef = (element) => {\n    this.inputEl = element;\n\n    const getRef = this.props.getRef;\n\n    if (getRef) {\n      if (typeof getRef === 'function') {\n        getRef(element);\n      } else {\n        getRef.current = element;\n      }\n    }\n  };\n\n  render () {\n    const { getRef, value, defaultValue, onChange, onClose, theme, autoFocus, ...inputProps } = this.props;\n    const hasValue = !!this.value;\n\n    const className = classNames(baseClassName, `Search--${theme}`, {\n      'Search--has-value': hasValue,\n      'Search--vkapps': this.context.webviewType === 'vkapps'\n    }, this.props.className);\n\n    return (\n      <div className={className}>\n        <div className=\"Search__container\">\n          <div className=\"Search__before\">\n            {theme === 'default' && <Icon24Search/>}\n            {theme === 'header' && <HeaderButton onClick={onClose}><Icon24Back/></HeaderButton>}\n          </div>\n          <div className=\"Search__control\">\n            <input\n              {...inputProps}\n              className=\"Search__input\"\n              ref={this.inputRef}\n              value={this.value}\n              onChange={this.onChange}\n            />\n          </div>\n          {hasValue &&\n          <div className=\"Search__after\">\n            {theme === 'default' && <Icon24Cancel onClick={this.onCancel}/>}\n            {theme === 'header' && <HeaderButton onClick={this.onCancel}><Icon24Cancel/></HeaderButton>}\n          </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n"],"file":"SearchAndroid.js"}
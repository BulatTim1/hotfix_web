{"version":3,"sources":["../../../../src/components/Alert/Alert.tsx"],"names":["React","Component","Tappable","PopoutWrapper","getClassName","classNames","transitionEvents","ANDROID","withPlatform","Alert","props","item","action","autoclose","setState","closing","waitTransitionFinish","onClose","e","stopPropagation","element","createRef","state","eventHandler","supported","eventName","prefix","current","removeEventListener","addEventListener","setTimeout","bind","platform","actions","actionsLayout","children","className","style","restProps","map","button","i","onItemClick","__html","title"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiD,OAAjD;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,OAAOC,aAAP,MAA0B,gCAA1B;AACA,OAAOC,YAAP,MAAyB,4BAAzB;AACA,OAAOC,UAAP,MAAuB,sBAAvB;AACA,OAAOC,gBAAP,MAA6B,4BAA7B;AACA,SAASC,OAAT,QAAwB,oBAAxB;AAEA,OAAOC,YAAP,MAAyB,wBAAzB;;IAmBMC,K;;;;;AACJ,iBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,+EAAMA,KAAN;;AADiB;;AAAA,kEAeL,UAAAC,IAAI;AAAA,aAAI,YAAM;AAAA,YAClBC,MADkB,GACID,IADJ,CAClBC,MADkB;AAAA,YACVC,SADU,GACIF,IADJ,CACVE,SADU;;AAG1B,YAAIA,SAAJ,EAAe;AACb,gBAAKC,QAAL,CAAc;AAAEC,YAAAA,OAAO,EAAE;AAAX,WAAd;;AACA,gBAAKC,oBAAL,CAA0B,YAAM;AAC9BH,YAAAA,SAAS,IAAI,MAAKH,KAAL,CAAWO,OAAX,EAAb;AACAL,YAAAA,MAAM,IAAIA,MAAM,EAAhB;AACD,WAHD;AAID,SAND,MAMO;AACLA,UAAAA,MAAM,IAAIA,MAAM,EAAhB;AACD;AACF,OAZiB;AAAA,KAfC;;AAAA,8DA6BT,YAAM;AACd,YAAKE,QAAL,CAAc;AAAEC,QAAAA,OAAO,EAAE;AAAX,OAAd;;AACA,YAAKC,oBAAL,CAA0B,YAAM;AAC9B,cAAKN,KAAL,CAAWO,OAAX;AACD,OAFD;AAGD,KAlCkB;;AAAA,sEAoCD,UAAAC,CAAC;AAAA,aAAIA,CAAC,CAACC,eAAF,EAAJ;AAAA,KApCA;;AAEjB,UAAKC,OAAL,GAAepB,KAAK,CAACqB,SAAN,EAAf;AACA,UAAKC,KAAL,GAAa;AACXP,MAAAA,OAAO,EAAE;AADE,KAAb;AAHiB;AAMlB;;;;yCAgCqBQ,Y,EAAc;AAClC,UAAIjB,gBAAgB,CAACkB,SAArB,EAAgC;AAC9B,YAAMC,SAAS,GAAGnB,gBAAgB,CAACoB,MAAjB,GAA0BpB,gBAAgB,CAACoB,MAAjB,GAA0B,eAApD,GAAsE,eAAxF;AAEA,aAAKN,OAAL,CAAaO,OAAb,CAAqBC,mBAArB,CAAyCH,SAAzC,EAAoDF,YAApD;AACA,aAAKH,OAAL,CAAaO,OAAb,CAAqBE,gBAArB,CAAsCJ,SAAtC,EAAiDF,YAAjD;AACD,OALD,MAKO;AACLO,QAAAA,UAAU,CAACP,YAAY,CAACQ,IAAb,CAAkB,IAAlB,CAAD,EAA0B,KAAKrB,KAAL,CAAWsB,QAAX,KAAwBzB,OAAxB,GAAkC,GAAlC,GAAwC,GAAlE,CAAV;AACD;AACF;;;6BAES;AAAA;;AAAA,wBAC+E,KAAKG,KADpF;AAAA,UACAuB,OADA,eACAA,OADA;AAAA,UACSC,aADT,eACSA,aADT;AAAA,UACwBC,QADxB,eACwBA,QADxB;AAAA,UACkCC,SADlC,eACkCA,SADlC;AAAA,UAC6CC,KAD7C,eAC6CA,KAD7C;AAAA,UACoDL,QADpD,eACoDA,QADpD;AAAA,UACiEM,SADjE;;AAAA,UAEAvB,OAFA,GAEY,KAAKO,KAFjB,CAEAP,OAFA;AAIR,aACE,oBAAC,aAAD;AACE,QAAA,SAAS,EAAEqB,SADb;AAEE,QAAA,OAAO,EAAErB,OAFX;AAGE,QAAA,KAAK,EAAEsB,KAHT;AAIE,QAAA,OAAO,EAAE,KAAKpB;AAJhB,SAME,wCACMqB,SADN;AAEE,QAAA,GAAG,EAAE,KAAKlB,OAFZ;AAGE,QAAA,OAAO,EAAE,KAAKD,eAHhB;AAIE,QAAA,SAAS,EAAEd,UAAU,CAACD,YAAY,CAAC,OAAD,EAAU4B,QAAV,CAAb,EAAkC;AACrD,sBAAYE,aAAa,KAAK,UADuB;AAErD,sBAAYA,aAAa,KAAK,YAFuB;AAGrD,4BAAkBnB;AAHmC,SAAlC;AAJvB,UAUE;AAAK,QAAA,SAAS,EAAC;AAAf,SAAiCoB,QAAjC,CAVF,EAWE;AAAQ,QAAA,SAAS,EAAC;AAAlB,SACGF,OAAO,CAACM,GAAR,CAAY,UAACC,MAAD,EAASC,CAAT;AAAA,eACX,oBAAC,QAAD;AACE,UAAA,SAAS,EAAC,QADZ;AAEE,UAAA,SAAS,EAAEpC,UAAU,CAAC,YAAD,wBAA8BmC,MAAM,CAACH,KAArC,EAFvB;AAGE,UAAA,OAAO,EAAE,MAAI,CAACK,WAAL,CAAiBF,MAAjB,CAHX;AAIE,UAAA,GAAG,yBAAkBC,CAAlB;AAJL,WAME;AAAM,UAAA,uBAAuB,EAAE;AAAEE,YAAAA,MAAM,EAAEH,MAAM,CAACI;AAAjB;AAA/B,UANF,CADW;AAAA,OAAZ,CADH,CAXF,CANF,CADF;AAiCD;;;;EAvFiB3C,S;;gBAAdQ,K,kBAWkB;AACpByB,EAAAA,aAAa,EAAE,YADK;AAEpBD,EAAAA,OAAO,EAAE;AAFW,C;;AA+ExB,eAAezB,YAAY,CAACC,KAAD,CAA3B","sourcesContent":["import React, { Component, HTMLAttributes } from 'react';\nimport Tappable from '../Tappable/Tappable';\nimport PopoutWrapper from '../PopoutWrapper/PopoutWrapper';\nimport getClassName from '../../helpers/getClassName';\nimport classNames from '../../lib/classNames';\nimport transitionEvents from '../../lib/transitionEvents';\nimport { ANDROID } from '../../lib/platform';\nimport { HasChildren, HasPlatform } from '../../types/props';\nimport withPlatform from '../../hoc/withPlatform';\n\nexport interface AlertActionsInterface {\n  title: string;\n  action?(): void;\n  autoclose?: boolean;\n  style: 'cancel' | 'destructive' | 'default'\n}\n\nexport interface AlertProps extends HTMLAttributes<HTMLElement>, HasPlatform, HasChildren {\n  actionsLayout?: 'vertical' | 'horizontal';\n  actions?: AlertActionsInterface[];\n  onClose?(): void\n}\n\nexport interface AlertState {\n  closing: boolean\n}\n\nclass Alert extends Component<AlertProps, AlertState> {\n  constructor(props) {\n    super(props);\n    this.element = React.createRef();\n    this.state = {\n      closing: false\n    };\n  }\n\n  element: React.RefObject<HTMLDivElement>\n\n  static defaultProps = {\n    actionsLayout: 'horizontal',\n    actions: []\n  };\n\n  onItemClick = item => () => {\n    const { action, autoclose } = item;\n\n    if (autoclose) {\n      this.setState({ closing: true });\n      this.waitTransitionFinish(() => {\n        autoclose && this.props.onClose();\n        action && action();\n      });\n    } else {\n      action && action();\n    }\n  };\n\n  onClose = () => {\n    this.setState({ closing: true });\n    this.waitTransitionFinish(() => {\n      this.props.onClose();\n    });\n  };\n\n  stopPropagation = e => e.stopPropagation();\n\n  waitTransitionFinish (eventHandler) {\n    if (transitionEvents.supported) {\n      const eventName = transitionEvents.prefix ? transitionEvents.prefix + 'TransitionEnd' : 'transitionend';\n\n      this.element.current.removeEventListener(eventName, eventHandler);\n      this.element.current.addEventListener(eventName, eventHandler);\n    } else {\n      setTimeout(eventHandler.bind(this), this.props.platform === ANDROID ? 200 : 300);\n    }\n  }\n\n  render () {\n    const { actions, actionsLayout, children, className, style, platform, ...restProps } = this.props;\n    const { closing } = this.state;\n\n    return (\n      <PopoutWrapper\n        className={className}\n        closing={closing}\n        style={style}\n        onClick={this.onClose}\n      >\n        <div\n          {...restProps}\n          ref={this.element}\n          onClick={this.stopPropagation}\n          className={classNames(getClassName('Alert', platform), {\n            'Alert--v': actionsLayout === 'vertical',\n            'Alert--h': actionsLayout === 'horizontal',\n            'Alert--closing': closing\n          })}\n        >\n          <div className=\"Alert__content\">{children}</div>\n          <footer className=\"Alert__footer\">\n            {actions.map((button, i) => (\n              <Tappable\n                component=\"button\"\n                className={classNames('Alert__btn', `Alert__btn--${button.style}`)}\n                onClick={this.onItemClick(button)}\n                key={`alert-action-${i}`}\n              >\n                <span dangerouslySetInnerHTML={{ __html: button.title }} />\n              </Tappable>\n            ))}\n          </footer>\n        </div>\n      </PopoutWrapper>\n    );\n  }\n}\n\nexport default withPlatform(Alert);\n"],"file":"Alert.js"}
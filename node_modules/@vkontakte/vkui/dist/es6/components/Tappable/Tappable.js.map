{"version":3,"sources":["../../../../src/components/Tappable/Tappable.js"],"names":["React","Component","PropTypes","Touch","TouchRootContext","classNames","getClassName","IS_PLATFORM_ANDROID","getOffsetRect","coordX","coordY","ts","Date","now","baseClassNames","ACTIVE_DELAY","ACTIVE_EFFECT_DELAY","storage","deactivateOtherInstances","exclude","Object","keys","filter","id","forEach","clearTimeout","activeTimeout","timeout","stop","Tappable","props","originalEvent","insideTouchRoot","stopPropagation","touches","length","onDown","getStorage","setTimeout","start","shiftXAbs","shiftYAbs","isSlide","state","active","activeEffectDelay","store","e","container","top","left","x","y","key","toString","setState","clicks","Math","round","wavesTimeout","getRootRef","current","random","children","className","component","restProps","disabled","classes","onStart","onMove","onEnd","ref","getRef","map","k","onClick","func","string","node","oneOfType","element","role","number","bool","shape","any"],"mappings":"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","sourcesContent":["\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Touch, { TouchRootContext } from '../Touch/Touch';\nimport classNames from '../../lib/classNames';\nimport getClassName from '../../helpers/getClassName';\nimport { IS_PLATFORM_ANDROID } from '../../lib/platform';\nimport { getOffsetRect } from '../../lib/offset';\nimport { coordX, coordY } from '../../lib/touch';\n\nconst ts = () => +Date.now();\nconst baseClassNames = getClassName('Tappable');\n\nconst ACTIVE_DELAY = 70;\nexport const ACTIVE_EFFECT_DELAY = 600;\n\nlet storage = {};\n\n/**\n * Очищает таймауты и хранилище для всех экземпляров компонента, кроме переданного\n *\n * @param {String} exclude ID экземпляра-исключения\n * @returns {void}\n */\nfunction deactivateOtherInstances (exclude) {\n  Object.keys(storage).filter(id => id !== exclude).forEach(id => {\n    clearTimeout(storage[id].activeTimeout);\n    clearTimeout(storage[id].timeout);\n    storage[id].stop();\n\n    delete storage[id];\n  });\n}\n\nexport default class Tappable extends Component {\n  constructor (props) {\n    super(props);\n    this.id = Math.round(Math.random() * 1e8).toString(16);\n    this.state = {\n      clicks: {},\n      active: false,\n      ts: null\n    };\n  }\n\n  static propTypes = {\n    onClick: PropTypes.func,\n    className: PropTypes.string,\n    children: PropTypes.node,\n    component: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.element\n    ]),\n    role: PropTypes.string,\n    activeEffectDelay: PropTypes.number,\n    stopPropagation: PropTypes.bool,\n    disabled: PropTypes.bool,\n    getRootRef: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.shape({ current: PropTypes.any })\n    ])\n  };\n\n  static defaultProps = {\n    component: 'div',\n    role: 'button',\n    stopPropagation: false,\n    disabled: false,\n    activeEffectDelay: ACTIVE_EFFECT_DELAY\n  };\n\n  isSlide = false;\n\n  /**\n   * Обрабатывает событие touchstart\n   *\n   * @returns {void}\n   */\n  onStart = ({ originalEvent }) => {\n    !this.insideTouchRoot && this.props.stopPropagation && originalEvent.stopPropagation();\n    if (originalEvent.touches && originalEvent.touches.length > 1) {\n      return deactivateOtherInstances();\n    }\n\n    if (IS_PLATFORM_ANDROID) {\n      this.onDown(originalEvent);\n    }\n\n    storage[this.id] = {};\n    this.getStorage().stop = this.stop;\n    this.getStorage().activeTimeout = setTimeout(this.start, ACTIVE_DELAY);\n  };\n\n  /**\n   * Обрабатывает событие touchmove\n   *\n   * @returns {void}\n   */\n  onMove = ({ originalEvent, shiftXAbs, shiftYAbs }) => {\n    !this.insideTouchRoot && this.props.stopPropagation && originalEvent.stopPropagation();\n    if (shiftXAbs > 20 || shiftYAbs > 20) {\n      this.isSlide = true;\n      this.stop();\n    }\n  };\n\n  /**\n   * Обрабатывает событие touchend\n   *\n   * @returns {void}\n   */\n  onEnd = ({ originalEvent }) => {\n    !this.insideTouchRoot && this.props.stopPropagation && originalEvent.stopPropagation();\n    const now = ts();\n\n    if (originalEvent.touches && originalEvent.touches.length > 0) {\n      this.isSlide = false;\n      return;\n    }\n\n    if (this.state.active) {\n      if (now - this.state.ts >= 100) {\n        // Долгий тап, выключаем подсветку\n        this.stop();\n      } else {\n        // Короткий тап, оставляем подсветку\n        const timeout = setTimeout(this.stop, this.props.activeEffectDelay - now + this.state.ts);\n        const store = this.getStorage();\n\n        if (store) {\n          store.timeout = timeout;\n        }\n      }\n    } else if (!this.isSlide) {\n      // Очень короткий тап, включаем подсветку\n      this.start();\n\n      const timeout = setTimeout(this.stop, this.props.activeEffectDelay);\n\n      if (this.getStorage()) {\n        clearTimeout(this.getStorage().activeTimeout);\n        this.getStorage().timeout = timeout;\n      } else {\n        this.timeout = timeout;\n      }\n    }\n\n    this.isSlide = false;\n  };\n\n  /**\n   * Реализует эффект при тапе для Андроида\n   *\n   * @returns {void}\n   */\n  onDown = (e) => {\n    if (IS_PLATFORM_ANDROID) {\n      const { top, left } = getOffsetRect(this.container);\n      const x = coordX(e);\n      const y = coordY(e);\n      const key = 'wave' + Date.now().toString();\n\n      this.setState(state => ({\n        clicks: {\n          ...state.clicks,\n          [key]: {\n            x: Math.round(x - left),\n            y: Math.round(y - top)\n          }\n        }\n      }));\n\n      this.wavesTimeout = setTimeout(() => {\n        this.setState(state => {\n          let clicks = { ...state.clicks };\n          delete clicks[key];\n          return { clicks };\n        });\n      }, 225);\n    }\n  };\n\n  /**\n   * Устанавливает активное выделение\n   *\n   * @returns {void}\n   */\n  start = () => {\n    if (!this.state.active) {\n      this.setState({\n        active: true,\n        ts: ts()\n      });\n    }\n    deactivateOtherInstances(this.id);\n  };\n\n  /**\n   * Снимает активное выделение\n   *\n   * @returns {void}\n   */\n  stop = () => {\n    if (this.state.active) {\n      this.setState({\n        active: false,\n        ts: null\n      });\n    }\n    if (this.getStorage()) {\n      clearTimeout(this.getStorage().activeTimeout);\n      delete storage[this.id];\n    }\n  };\n\n  /**\n   * Возвращает хранилище для экземпляра компонента\n   *\n   * @returns {Object} Хранилище для текущего экземпляра компонента\n   */\n  getStorage = () => {\n    return storage[this.id];\n  };\n\n  /**\n   * Берет ref на DOM-ноду из экземпляра Touch\n   *\n   * @param {React.Component} container Touch component instance\n   */\n  getRef = container => {\n    this.container = container;\n\n    const getRootRef = this.props.getRootRef;\n    if (getRootRef) {\n      if (typeof getRootRef === 'function') {\n        getRootRef(container);\n      } else {\n        getRootRef.current = container;\n      }\n    }\n  };\n\n  componentWillUnmount () {\n    if (storage[this.id]) {\n      clearTimeout(storage[this.id].timeout);\n      clearTimeout(storage[this.id].activeTimeout);\n\n      delete storage[this.id];\n    }\n\n    clearTimeout(this.wavesTimeout);\n  }\n\n  render () {\n    const { clicks, active } = this.state;\n    const { children, className, component, activeEffectDelay, stopPropagation, getRootRef, ...restProps } = this.props;\n    const Component = !restProps.disabled ? Touch : component;\n    const classes = classNames(baseClassNames, className, {\n      'Tappable--active': active,\n      'Tappable--inactive': !active\n    });\n\n    let props = {};\n\n    if (!restProps.disabled) {\n      props.component = component;\n      props.onStart = this.onStart;\n      props.onMove = this.onMove;\n      props.onEnd = this.onEnd;\n    }\n\n    if (typeof Component === 'string') {\n      props.ref = this.getRef;\n    } else {\n      props.getRootRef = this.getRef;\n    }\n\n    return (\n      <TouchRootContext.Consumer>\n        {insideTouchRoot => {\n          this.insideTouchRoot = insideTouchRoot;\n\n          return (\n            <Component {...restProps} className={classes} {...props}>\n              {IS_PLATFORM_ANDROID && (\n                <span className=\"Tappable__waves\">\n                  {Object.keys(clicks).map(k => (\n                    <span className=\"Tappable__wave\" style={{ top: clicks[k].y, left: clicks[k].x }} key={k} />\n                  ))}\n                </span>\n              )}\n              {children}\n            </Component>\n          );\n        }}\n      </TouchRootContext.Consumer>\n    );\n  }\n}\n"],"file":"Tappable.js"}
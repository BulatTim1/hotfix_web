{"version":3,"sources":["../../../../src/components/ActionSheet/ActionSheet.tsx"],"names":["React","Children","Component","PopoutWrapper","getClassName","classNames","transitionEvents","withInsets","withPlatform","isNumeric","ANDROID","IOS","ActionSheet","closing","setState","waitTransitionFinish","props","onClose","action","autoclose","event","persist","el","e","stopPropagation","eventHandler","supported","eventName","prefix","removeEventListener","addEventListener","setTimeout","bind","platform","children","className","title","text","style","insets","restProps","state","getRef","toArray","map","child","index","arr","cloneElement","onClick","onItemClick","length","bottom","marginBottom"],"mappings":"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","sourcesContent":["import React, { Children, Component } from 'react';\nimport PopoutWrapper from '../PopoutWrapper/PopoutWrapper';\nimport getClassName from '../../helpers/getClassName';\nimport classNames from '../../lib/classNames';\nimport transitionEvents from '../../lib/transitionEvents';\nimport withInsets from '../../hoc/withInsets';\nimport withPlatform from '../../hoc/withPlatform';\nimport { isNumeric } from '../../lib/utils';\nimport { HasChildren, HasClassName, HasStyleObject, HasPlatform, HasInsets } from '../../types/props';\nimport { ANDROID, IOS } from '../../lib/platform';\n\nexport interface ActionSheetProps extends HasStyleObject, HasChildren, HasClassName, HasPlatform, HasInsets {\n  /**\n   * iOS only\n   */\n  title?: React.ReactNode;\n  /**\n   * iOS only\n   */\n  text?: React.ReactNode;\n  onClose(): void;\n}\n\nexport interface ActionSheetState {\n  closing: boolean\n}\n\nclass ActionSheet extends Component<ActionSheetProps, ActionSheetState> {\n  state = {\n    closing: false\n  };\n\n  el: HTMLDivElement\n\n  onClose = () => {\n    this.setState({ closing: true });\n    this.waitTransitionFinish(this.props.onClose);\n  };\n\n  onItemClick = (action, autoclose) => (event) => {\n    event.persist();\n\n    if (autoclose) {\n      this.setState({ closing: true });\n      this.waitTransitionFinish(() => {\n        autoclose && this.props.onClose();\n        action && action(event);\n      });\n    } else {\n      action && action(event);\n    }\n  };\n\n  getRef = el => this.el = el;\n\n  stopPropagation = e => e.stopPropagation();\n\n  waitTransitionFinish (eventHandler) {\n    if (transitionEvents.supported) {\n      const eventName = transitionEvents.prefix ? transitionEvents.prefix + 'TransitionEnd' : 'transitionend';\n\n      this.el.removeEventListener(eventName, eventHandler);\n      this.el.addEventListener(eventName, eventHandler);\n    } else {\n      setTimeout(eventHandler.bind(this), this.props.platform === ANDROID ? 200 : 300);\n    }\n  }\n\n  render () {\n    const { children, className, title, text, style, insets, platform, ...restProps } = this.props;\n\n    return (\n      <PopoutWrapper\n        closing={this.state.closing}\n        v=\"bottom\"\n        h=\"center\"\n        className={className}\n        style={style}\n        onClick={this.onClose}\n      >\n        <div\n          {...restProps}\n          ref={this.getRef}\n          onClick={this.stopPropagation}\n          className={classNames(getClassName('ActionSheet', platform), {\n            'ActionSheet--closing': this.state.closing\n          })}\n        >\n          {platform === IOS &&\n          <header className=\"ActionSheet__header\">\n            {title && <div className=\"ActionSheet__title\">{title}</div>}\n            {text && <div className=\"ActionSheet__text\">{text}</div>}\n          </header>\n          }\n          {Children.toArray(children).map((child: React.ReactElement, index, arr) => (\n            child && React.cloneElement(child, {\n              onClick: this.onItemClick(child.props.onClick, child.props.autoclose),\n              style: index === arr.length - 1 && isNumeric(insets.bottom) ? { marginBottom: insets.bottom } : null\n            })\n          ))}\n        </div>\n      </PopoutWrapper>\n    );\n  }\n}\n\nexport default withPlatform(withInsets(ActionSheet));\n"],"file":"ActionSheet.js"}
{"version":3,"sources":["../../../src/components/Gallery/Gallery.tsx"],"names":["Gallery","props","targetIndex","setState","animation","shiftX","calculateIndent","current","timeout","clearTimeout","setTimeout","autoplay","e","startT","isDraggable","originalEvent","preventDefault","isSlideX","onDragStart","state","deltaX","dragging","isSlide","getTarget","onDragEnd","onEnd","initializeSlides","layerWidth","slides","containerWidth","container","offsetWidth","viewportWidth","viewport","min","calcMin","max","calcMax","window","requestAnimationFrame","duration","canUseDOM","length","go","id","slide","slidesStore","slideIndex","initialSlideIndex","React","createRef","callback","Children","map","children","_item","i","elem","coordX","offsetLeft","width","reduce","val","align","isCenterWithCustomWidth","targetSlide","validateIndent","indent","Number","value","expectDeltaX","Date","now","shift","direction","item","index","previousValue","Math","abs","currentValue","addEventListener","onResize","prevProps","prevState","isChildrenDirty","onChange","removeEventListener","slideWidth","bullets","className","platform","restProps","calculateDragIndent","layerStyle","WebkitTransform","transform","WebkitTransition","transition","onStart","onMoveX","getViewportRef","getSlideRef","Component"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport getClassName from '../../helpers/getClassName';\nimport Touch from '../Touch/Touch';\nimport classNames from '../../lib/classNames';\nimport withPlatform from '../../hoc/withPlatform';\nimport { HasClassName, HasChildren, HasStyleObject, HasPlatform } from '../../types/props';\nimport { canUseDOM } from '../../lib/dom';\n\nexport interface GalleryProps extends HasStyleObject, HasChildren, HasClassName, HasPlatform {\n  slideWidth?: string | number;\n  autoplay?: number;\n  initialSlideIndex?: number;\n  slideIndex?: number;\n  onDragStart?(): void;\n  onDragEnd?(): void,\n  onChange?(current: GalleryState['current']): void,\n  onEnd?({ targetIndex }: { targetIndex: GalleryState['current'] }): void,\n  align?: 'left' | 'center' | 'right',\n  bullets?: 'dark' | 'light' | false\n}\n\nexport interface GalleryState {\n  containerWidth: number,\n  layerWidth?: number,\n  min?: number,\n  max?: number,\n  startT?: number,\n  current: number,\n  deltaX: number,\n  shiftX: number,\n  slides: GallerySlidesState[],\n  animation: boolean,\n  duration: number,\n  dragging?: boolean\n}\n\nexport interface GallerySlidesState {\n  coordX: number,\n  width: number\n}\n\nclass Gallery extends Component<GalleryProps, GalleryState> {\n  constructor (props) {\n    super(props);\n\n    const current = typeof props.slideIndex === 'number' ? props.slideIndex : props.initialSlideIndex;\n\n    this.state = {\n      containerWidth: 0,\n      current,\n      deltaX: 0,\n      shiftX: 0,\n      slides: [],\n      animation: false,\n      duration: 0.24\n    };\n\n    this.container = React.createRef();\n\n    this.slidesStore = {};\n  }\n\n  container: React.RefObject<HTMLDivElement>;\n  slidesStore: Object;\n  viewport: HTMLElement;\n  timeout: number;\n  isChildrenDirty: boolean;\n\n  static defaultProps = {\n    slideWidth: '100%',\n    children: '',\n    autoplay: 0,\n    initialSlideIndex: 0,\n    align: 'left',\n    bullets: false\n  };\n\n  get isCenterWithCustomWidth () {\n    return this.props.slideWidth === 'custom' && this.props.align === 'center';\n  }\n\n  initializeSlides (callback = () => {}) {\n    const slides = React.Children.map(this.props.children, (_item, i): GallerySlidesState => {\n      const elem = this.slidesStore[`slide-${i}`];\n      return {\n        coordX: elem.offsetLeft,\n        width: elem.offsetWidth\n      };\n    });\n\n    const containerWidth = this.container.current.offsetWidth;\n    const viewportWidth = this.viewport.offsetWidth;\n    const layerWidth = slides.reduce((val, slide) => slide.width + val, 0);\n\n    const min = this.calcMin({ containerWidth, layerWidth, viewportWidth, slides });\n    const max = this.calcMax({ viewportWidth, slides });\n\n    this.setState({ min, max, layerWidth, containerWidth, slides }, callback);\n  }\n\n  calcMin ({ containerWidth, layerWidth, viewportWidth, slides }) {\n    switch (this.props.align) {\n      case 'left':\n        return containerWidth - layerWidth;\n      case 'right':\n        return viewportWidth - layerWidth;\n      case 'center':\n        if (this.isCenterWithCustomWidth && slides.length) {\n          const { coordX, width } = slides[slides.length - 1];\n          return (viewportWidth / 2) - coordX - (width / 2);\n        } else {\n          return viewportWidth - (containerWidth - viewportWidth) / 2 - layerWidth;\n        }\n    }\n  }\n\n  calcMax ({ viewportWidth, slides }) {\n    if (this.isCenterWithCustomWidth && slides.length) {\n      const { width, coordX } = slides[0];\n      return (viewportWidth / 2) - coordX - (width / 2);\n    } else {\n      return 0;\n    }\n  }\n\n  /**\n   * Считает отступ слоя галереи\n   * @param {Number} targetIndex ID целевого слайда\n   * @returns {Number} Значения отступа\n   */\n  calculateIndent (targetIndex) {\n    const { slides } = this.state;\n\n    if (!this.isDraggable()) {\n      return 0;\n    }\n\n    const targetSlide = slides.length ? slides[targetIndex] : null;\n\n    if (targetSlide) {\n      const { coordX, width } = targetSlide;\n\n      if (this.isCenterWithCustomWidth) {\n        const viewportWidth = this.viewport.offsetWidth;\n        return (viewportWidth / 2) - coordX - (width / 2);\n      }\n\n      return this.validateIndent(-1 * coordX);\n    } else {\n      return 0;\n    }\n  }\n\n  /**\n   * Считает отступ слоя галереи во время драга\n   * @returns {Number} Значения отступа\n   */\n  calculateDragIndent () {\n    const { shiftX, deltaX, min, max } = this.state;\n    const indent = shiftX + deltaX;\n\n    if (indent > max) {\n      return max + Number((indent - max) / 3);\n    } else if (indent < min) {\n      return min + Number((indent - min) / 3);\n    }\n\n    return indent;\n  }\n\n  validateIndent (value) {\n    const { min, max } = this.state;\n\n    if (value < min) {\n      return min;\n    } else if (value > max) {\n      return max;\n    }\n\n    return value;\n  }\n\n  isDraggable () {\n    return this.state.layerWidth > this.state.containerWidth;\n  }\n\n  /**\n   * Получает индекс слайда, к которому будет осуществлен переход\n   * @returns {Number} Индекс слайда\n   */\n  getTarget () {\n    const { slides, current, deltaX, shiftX, startT, max } = this.state;\n    const expectDeltaX = deltaX / (Date.now() - startT) * 240 * 0.6;\n    const shift = shiftX + deltaX + expectDeltaX - max;\n    const direction = deltaX < 0 ? 1 : -1;\n\n    // Находим ближайшую границу слайда к текущему отступу\n    let targetIndex = slides.reduce((val, item, index) => {\n      const previousValue = Math.abs(slides[val].coordX + shift);\n      const currentValue = Math.abs(item.coordX + shift);\n\n      return previousValue < currentValue ? val : index;\n    }, current);\n\n    if (targetIndex === current) {\n      let targetSlide = current + direction;\n\n      if (targetSlide >= 0 && targetSlide < slides.length) {\n        if (Math.abs(deltaX) > slides[targetSlide].width * 0.05) {\n          targetIndex = targetSlide;\n        }\n      }\n    }\n\n    return targetIndex;\n  }\n\n  go = (targetIndex) => {\n    this.setState({\n      animation: true,\n      shiftX: this.calculateIndent(targetIndex),\n      current: targetIndex\n    });\n\n    if (this.timeout) {\n      this.clearTimeout();\n      this.setTimeout(this.props.autoplay);\n    }\n  };\n\n  onStart = (e) => {\n    this.setState({\n      animation: false,\n      startT: e.startT\n    });\n  }\n\n  onMoveX = (e): void => {\n    if (this.isDraggable()) {\n      e.originalEvent.preventDefault();\n\n      if (e.isSlideX) {\n        this.props.onDragStart && this.props.onDragStart();\n\n        if (this.state.deltaX !== e.shiftX || this.state.dragging !== e.isSlideX) {\n          this.setState({\n            deltaX: e.shiftX,\n            dragging: e.isSlideX\n          });\n        }\n      }\n    }\n  }\n\n  onEnd = (e) => {\n    const targetIndex = e.isSlide ? this.getTarget() : this.state.current;\n    this.props.onDragEnd && this.props.onDragEnd();\n\n    this.setState({\n      shiftX: this.calculateIndent(targetIndex),\n      deltaX: 0,\n      animation: true,\n      current: targetIndex\n    });\n\n    if (this.props.onEnd) {\n      this.props.onEnd({ targetIndex });\n    }\n\n    if (this.timeout) {\n      this.clearTimeout();\n      this.setTimeout(this.props.autoplay);\n    }\n\n    return true;\n  }\n\n  onResize = () => {\n    this.initializeSlides();\n\n    const { layerWidth, slides } = this.state;\n    const containerWidth = this.container.current.offsetWidth;\n\n    const viewportWidth = this.viewport.offsetWidth;\n\n    this.setState({\n      shiftX: this.calculateIndent(this.state.current),\n      containerWidth,\n      min: this.calcMin({ layerWidth, containerWidth, viewportWidth, slides }),\n      max: this.calcMax({ viewportWidth, slides }),\n      animation: false\n    }, () => {\n      window.requestAnimationFrame(() => this.setState({ animation: true }));\n    });\n  };\n\n  setTimeout = (duration) => {\n    if (canUseDOM) {\n      this.timeout = window.setTimeout(() => {\n        const { slides, current } = this.state;\n        const targetIndex = current < slides.length - 1 ? current + 1 : 0;\n\n        this.go(targetIndex);\n      }, duration);\n    }\n  };\n\n  clearTimeout = () => {\n    clearTimeout(this.timeout);\n  };\n\n  getSlideRef = (id) => (slide) => {\n    this.slidesStore[`slide-${id}`] = slide;\n  }\n\n  getViewportRef = (viewport) => {\n    this.viewport = viewport ? viewport.container : {};\n  }\n\n  componentDidMount () {\n    this.initializeSlides(() => {\n      this.setState({\n        shiftX: this.calculateIndent(this.state.current)\n      });\n    });\n\n    window.addEventListener('resize', this.onResize);\n\n    if (this.props.autoplay) {\n      this.setTimeout(this.props.autoplay);\n    }\n  }\n\n  componentDidUpdate (prevProps, prevState) {\n    if (this.props.children !== prevProps.children) {\n      this.isChildrenDirty = true;\n    }\n\n    if (this.isChildrenDirty) {\n      this.isChildrenDirty = false;\n      this.initializeSlides();\n    }\n    if (prevState.current !== this.state.current && this.props.onChange) {\n      this.props.onChange(this.state.current);\n    }\n\n    if (this.props.autoplay && !prevProps.autoplay) {\n      if (this.props.autoplay) {\n        this.setTimeout(this.props.autoplay);\n      }\n    }\n\n    if (!this.props.autoplay && prevProps.autoplay) {\n      this.clearTimeout();\n    }\n\n    if (this.props.slideIndex !== prevProps.slideIndex && typeof this.props.slideIndex === 'number') {\n      this.go(this.props.slideIndex);\n    }\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('resize', this.onResize);\n    this.clearTimeout();\n  }\n\n  render () {\n    const { animation, duration, current, dragging } = this.state;\n    const {\n      children,\n      slideWidth,\n      autoplay,\n      initialSlideIndex,\n      slideIndex,\n      onDragStart,\n      onDragEnd,\n      onChange,\n      onEnd,\n      align,\n      bullets,\n      className,\n      platform,\n      ...restProps\n    } = this.props;\n\n    const indent = dragging ? this.calculateDragIndent() : this.calculateIndent(current);\n\n    const layerStyle = {\n      WebkitTransform: `translateX(${indent}px)`,\n      transform: `translateX(${indent}px)`,\n      WebkitTransition: animation ? `-webkit-transform ${duration}s cubic-bezier(.1, 0, .25, 1)` : 'none',\n      transition: animation ? `transform ${duration}s cubic-bezier(.1, 0, .25, 1)` : 'none'\n    };\n\n    return (\n      <div className={classNames(getClassName('Gallery', platform), className, `Gallery--${align}`, {\n        'Gallery--dragging': dragging,\n        'Gallery--custom-width': slideWidth === 'custom'\n      })} {...restProps} ref={this.container}>\n        <Touch\n          className='Gallery__viewport'\n          onStartX={this.onStart}\n          onMoveX={this.onMoveX}\n          onEnd={this.onEnd}\n          style={{ width: slideWidth === 'custom' ? '100%' : slideWidth }}\n          ref={this.getViewportRef}\n        >\n          <div className='Gallery__layer' style={layerStyle}>\n            {React.Children.map(children, (item, i) => (\n              <div className='Gallery__slide' key={`slide-${i}`} ref={this.getSlideRef(i)}>{item}</div>\n            ))}\n          </div>\n        </Touch>\n\n        {bullets &&\n        <div className={classNames('Gallery__bullets', `Gallery__bullets--${bullets}`)}>\n          {React.Children.map(children, (_item, index) => (\n            <div\n              className={classNames('Gallery__bullet', { 'Gallery__bullet--active': index === current })}\n              key={index}\n            />\n          ))}\n        </div>\n        }\n      </div>\n    );\n  }\n}\n\nexport default withPlatform(Gallery);\n"],"file":"Gallery.js"}
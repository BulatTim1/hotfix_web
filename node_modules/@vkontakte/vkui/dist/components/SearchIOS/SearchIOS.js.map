{"version":3,"sources":["../../../src/components/SearchIOS/SearchIOS.js"],"names":["baseClassName","searchId","SearchIOS","props","e","setState","focused","onFocus","onBlur","isControlledOutside","value","target","onChange","element","getRef","current","state","showAfter","placeholderOffset","afterWidth","hasOwnProperty","defaultValue","className","theme","placeholder","after","inputProps","inputRef","__html","onCancel","React","Component","PropTypes","string","node","func","oneOf","oneOfType","shape","any"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport getClassName from '../../helpers/getClassName';\nimport classNames from '../../lib/classNames';\nimport Icon16SearchOutline from '@vkontakte/icons/dist/16/search_outline';\n\nconst baseClassName = getClassName('Search');\n\nlet searchId = 0;\n\nexport default class SearchIOS extends React.Component {\n  constructor (props) {\n    super(props);\n\n    let state = {\n      showAfter: false,\n      focused: false,\n      placeholderOffset: null,\n      afterWidth: null\n    };\n\n    if (props.hasOwnProperty('value')) {\n      this.isControlledOutside = true;\n    } else {\n      state.value = props.defaultValue || '';\n    }\n    searchId++;\n    this.state = state;\n  }\n\n  static propTypes = {\n    className: PropTypes.string,\n    after: PropTypes.node,\n    defaultValue: PropTypes.string,\n    value: PropTypes.string,\n    onChange: PropTypes.func,\n    onFocus: PropTypes.func,\n    onBlur: PropTypes.func,\n    placeholder: PropTypes.node,\n    theme: PropTypes.oneOf(['header', 'default']),\n    getRef: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.shape({ current: PropTypes.any })\n    ])\n  };\n\n  static defaultProps = {\n    after: 'Отменить',\n    theme: 'default',\n    placeholder: 'Поиск'\n  };\n\n  get value () {\n    return this.isControlledOutside ? this.props.value : this.state.value;\n  }\n\n  onFocus = (e) => {\n    this.setState({ focused: true });\n    this.props.onFocus && this.props.onFocus(e);\n  };\n\n  onBlur = (e) => {\n    this.setState({ focused: false });\n    this.props.onBlur && this.props.onBlur(e);\n  };\n\n  onChange = (e) => {\n    if (!this.isControlledOutside) {\n      this.setState({ value: e.target.value });\n    }\n    if (this.props.onChange) {\n      this.props.onChange(e.target.value, e);\n    }\n  };\n\n  onCancel = () => {\n    if (!this.isControlledOutside) {\n      this.setState({ value: '' });\n    }\n    if (this.props.onChange) {\n      this.props.onChange('');\n    }\n  };\n\n  inputRef = (element) => {\n    const getRef = this.props.getRef;\n    if (getRef) {\n      if (typeof getRef === 'function') {\n        getRef(element);\n      } else {\n        getRef.current = element;\n      }\n    }\n  };\n\n  render () {\n    const {\n      className,\n      theme,\n      onFocus,\n      onBlur,\n      onChange,\n      defaultValue,\n      value,\n      placeholder,\n      after,\n      getRef,\n      ...inputProps\n    } = this.props;\n\n    return (\n      <div className={classNames(baseClassName, {\n        [`Search--${theme}`]: true,\n        'Search--focused': this.state.focused,\n        'Search--has-value': this.value,\n        'Search--has-after': after\n      }, className)}>\n        <div className=\"Search__in\">\n          <div className=\"Search__width\" />\n          <div className=\"Search__control\">\n            <input\n              {...inputProps}\n              id={`search-${searchId}`}\n              ref={this.inputRef}\n              type=\"text\"\n              className=\"Search__input\"\n              onFocus={this.onFocus}\n              onBlur={this.onBlur}\n              onChange={this.onChange}\n              value={this.value}\n            />\n            {after && <div className=\"Search__after-width\">{after}</div>}\n            <label\n              className=\"Search__placeholder\"\n              htmlFor={`search-${searchId}`}\n            >\n              <div className=\"Search__placeholder-in\">\n                <Icon16SearchOutline />\n                <div className=\"Search__placeholder-text\" dangerouslySetInnerHTML={{ __html: placeholder }} />\n              </div>\n            </label>\n          </div>\n          {after &&\n          <div className=\"Search__after\" onClick={this.onCancel}>\n            <div className=\"Search__after-in\">{after}</div>\n          </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n"],"file":"SearchIOS.js"}
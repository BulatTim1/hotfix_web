{"version":3,"sources":["../../../src/components/SearchAndroid/SearchAndroid.js"],"names":["baseClassName","SearchAndroid","props","isControlledOutside","setState","value","onChange","inputEl","focus","e","target","element","getRef","current","state","hasOwnProperty","defaultValue","theme","autoFocus","onClose","inputProps","hasValue","className","context","webviewType","inputRef","onCancel","React","Component","PropTypes","string","func","onFocus","onBlur","placeholder","node","oneOf","oneOfType","shape","any","bool"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport getClassName from '../../helpers/getClassName';\nimport classNames from '../../lib/classNames';\n\nimport HeaderButton from '../HeaderButton/HeaderButton';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\nimport Icon24Cancel from '@vkontakte/icons/dist/24/cancel';\nimport Icon24Search from '@vkontakte/icons/dist/24/search';\n\nconst baseClassName = getClassName('Search');\n\nexport default class SearchAndroid extends React.Component {\n  constructor (props) {\n    super(props);\n\n    let state = {};\n\n    if (props.hasOwnProperty('value')) {\n      this.isControlledOutside = true;\n    } else {\n      state.value = props.defaultValue || '';\n    }\n\n    this.state = state;\n  }\n\n  static propTypes = {\n    className: PropTypes.string,\n    defaultValue: PropTypes.string,\n    value: PropTypes.string,\n    onChange: PropTypes.func,\n    onFocus: PropTypes.func,\n    onBlur: PropTypes.func,\n    onClose: PropTypes.func,\n    placeholder: PropTypes.node,\n    theme: PropTypes.oneOf(['header', 'default']),\n    getRef: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.shape({ current: PropTypes.any })\n    ]),\n    autoFocus: PropTypes.bool\n  };\n\n  static defaultProps = {\n    placeholder: 'Поиск',\n    theme: 'default',\n    autoFocus: true\n  };\n\n  static contextTypes = {\n    webviewType: PropTypes.oneOf(['vkapps', 'internal'])\n  };\n\n  onCancel = () => {\n    if (!this.isControlledOutside) {\n      this.setState({ value: '' });\n    }\n    if (this.props.onChange) {\n      this.props.onChange('');\n    }\n    this.inputEl.focus();\n  };\n\n  onChange = (e) => {\n    if (!this.isControlledOutside) {\n      this.setState({ value: e.target.value });\n    }\n    if (this.props.onChange) {\n      this.props.onChange(e.target.value, e);\n    }\n  };\n\n  componentDidMount () {\n    this.props.theme === 'header' && this.props.autoFocus && this.inputEl.focus();\n  }\n\n  get value () {\n    return this.isControlledOutside ? this.props.value : this.state.value;\n  }\n\n  inputRef = (element) => {\n    this.inputEl = element;\n\n    const getRef = this.props.getRef;\n\n    if (getRef) {\n      if (typeof getRef === 'function') {\n        getRef(element);\n      } else {\n        getRef.current = element;\n      }\n    }\n  };\n\n  render () {\n    const { getRef, value, defaultValue, onChange, onClose, theme, autoFocus, ...inputProps } = this.props;\n    const hasValue = !!this.value;\n\n    const className = classNames(baseClassName, `Search--${theme}`, {\n      'Search--has-value': hasValue,\n      'Search--vkapps': this.context.webviewType === 'vkapps'\n    }, this.props.className);\n\n    return (\n      <div className={className}>\n        <div className=\"Search__container\">\n          <div className=\"Search__before\">\n            {theme === 'default' && <Icon24Search/>}\n            {theme === 'header' && <HeaderButton onClick={onClose}><Icon24Back/></HeaderButton>}\n          </div>\n          <div className=\"Search__control\">\n            <input\n              {...inputProps}\n              className=\"Search__input\"\n              ref={this.inputRef}\n              value={this.value}\n              onChange={this.onChange}\n            />\n          </div>\n          {hasValue &&\n          <div className=\"Search__after\">\n            {theme === 'default' && <Icon24Cancel onClick={this.onCancel}/>}\n            {theme === 'header' && <HeaderButton onClick={this.onCancel}><Icon24Cancel/></HeaderButton>}\n          </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n"],"file":"SearchAndroid.js"}
{"version":3,"sources":["../../src/lib/polyfills.ts"],"names":["canUseDOM","ElementProto","Element","prototype","matches","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","closest","css","node","parentElement","Array","find","callback","TypeError","list","Object","length","thisArg","arguments","i","element","call"],"mappings":";;AAAA;;AAYA,IAAIA,cAAJ,EAAe;AACb,MAAMC,YAAY,GAAGC,OAAO,CAACC,SAA7B,CADa,CAGb;;AACA,MAAI,CAACF,YAAY,CAACG,OAAlB,EAA2B;AACzBH,IAAAA,YAAY,CAACG,OAAb,GAAwBH,YAAD,CAA6BI,eAA7B,IACrBJ,YAAY,CAACK,qBADQ,IAEpBL,YAAD,CAA6BM,kBAFR,IAGlBN,YAAD,CAA6BO,iBAHjC;AAID,GATY,CAWb;;;AACA,MAAI,CAACP,YAAY,CAACQ,OAAlB,EAA2B;AACzBR,IAAAA,YAAY,CAACQ,OAAb,GAAuB,UAASC,GAAT,EAAsC;AAC3D,UAAIC,IAAa,GAAG,IAApB;;AACA,aAAOA,IAAP,EAAa;AACX,YAAIA,IAAI,CAACP,OAAL,CAAaM,GAAb,CAAJ,EAAuB,OAAOC,IAAP,CAAvB,KACKA,IAAI,GAAGA,IAAI,CAACC,aAAZ;AACN;;AACD,aAAO,IAAP;AACD,KAPD;AAQD;AACF,C,CAED;;;AACA,IAAI,CAACC,KAAK,CAACV,SAAN,CAAgBW,IAArB,EAA2B;AACzBD,EAAAA,KAAK,CAACV,SAAN,CAAgBW,IAAhB,GAAuB,UAASC,QAAT,EAAmB;AACxC,QAAI,SAAS,IAAb,EAAmB;AACjB,YAAM,IAAIC,SAAJ,CAAc,kDAAd,CAAN;AACD,KAFD,MAEO,IAAI,OAAOD,QAAP,KAAoB,UAAxB,EAAoC;AACzC,YAAM,IAAIC,SAAJ,CAAc,6BAAd,CAAN;AACD;;AAED,QAAIC,IAAI,GAAGC,MAAM,CAAC,IAAD,CAAjB;AACA,QAAIC,MAAM,GAAGF,IAAI,CAACE,MAAL,KAAgB,CAA7B;AACA,QAAIC,OAAO,GAAGC,SAAS,CAAC,CAAD,CAAvB;;AAEA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,MAApB,EAA4BG,CAAC,EAA7B,EAAiC;AAC/B,UAAIC,OAAO,GAAGN,IAAI,CAACK,CAAD,CAAlB;;AACA,UAAIP,QAAQ,CAACS,IAAT,CAAcJ,OAAd,EAAuBG,OAAvB,EAAgCD,CAAhC,EAAmCL,IAAnC,CAAJ,EAA8C;AAC5C,eAAOM,OAAP;AACD;AACF;AACF,GAjBD;AAkBD","sourcesContent":["import { canUseDOM } from './dom';\n\nexport interface MatchesMethod {\n  (css: string): boolean\n}\n\nexport interface OldElement extends Element {\n  matchesSelector?: MatchesMethod,\n  mozMatchesSelector?: MatchesMethod,\n  msMatchesSelector?: MatchesMethod,\n}\n\nif (canUseDOM) {\n  const ElementProto = Element.prototype;\n\n  // Element.prototype.matches\n  if (!ElementProto.matches) {\n    ElementProto.matches = (ElementProto as OldElement).matchesSelector ||\n      ElementProto.webkitMatchesSelector ||\n      (ElementProto as OldElement).mozMatchesSelector ||\n        (ElementProto as OldElement).msMatchesSelector;\n  }\n\n  // Element.prototype.closest\n  if (!ElementProto.closest) {\n    ElementProto.closest = function(css: string): Element | null {\n      let node: Element = this;\n      while (node) {\n        if (node.matches(css)) return node;\n        else node = node.parentElement;\n      }\n      return null;\n    };\n  }\n}\n\n// Array.prototype.find\nif (!Array.prototype.find) {\n  Array.prototype.find = function(callback) {\n    if (this === null) {\n      throw new TypeError('Array.prototype.find called on null or undefined');\n    } else if (typeof callback !== 'function') {\n      throw new TypeError('callback must be a function');\n    }\n\n    let list = Object(this);\n    let length = list.length >>> 0;\n    let thisArg = arguments[1];\n\n    for (let i = 0; i < length; i++) {\n      let element = list[i];\n      if (callback.call(thisArg, element, i, list)) {\n        return element;\n      }\n    }\n  };\n}\n"],"file":"polyfills.js"}
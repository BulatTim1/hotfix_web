{"ast":null,"code":"var _jsxFileName = \"E:\\\\Projects\\\\hotfix_web\\\\src\\\\App.js\";\nimport React, { useState } from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport Home from './panels/Home';\nimport Place from './panels/Place';\nimport Basket from './panels/Basket';\nimport Order from './panels/Order';\nimport Orders from './panels/Orders';\nimport './panels/App.css';\nimport kfc from './img/kfc.png';\nimport burger from './img/burger.png';\nimport mcdac from './img/mcdac.png';\nimport sub from './img/sub.png';\nimport OneTowar from './img/1.png';\nimport TwoTowar from './img/2.png';\nimport ThreeTowar from './img/3.png';\nimport FourTowar from './img/4.png';\nconst FOOD_AREAS = [{\n  id: 'pizikiva-gallery',\n  name: 'ТРЦ \"Им.Пыжикова\"',\n  items: [{\n    id: 'kfc',\n    name: 'KFC',\n    link: '/place/pizikiva-gallery/kfc',\n    description: 'Сеть ресторанов быстрого питания',\n    image: kfc,\n    foods: [{\n      id: 'classic',\n      image: FourTowar,\n      name: 'Классик',\n      price: 150\n    }, {\n      id: 'bigmac',\n      image: OneTowar,\n      name: 'Картофель фри',\n      price: 50\n    }]\n  }, {\n    id: 'burger-king',\n    name: 'Burger King',\n    link: '/place/pizikiva-gallery/burger-king',\n    description: 'Сеть ресторанов быстрого питания',\n    image: burger,\n    foods: [{\n      id: 'OneTowar',\n      name: 'Товар № 1',\n      composition: 'Состав: по ГОСТу',\n      price: 630,\n      image: OneTowar\n    }, {\n      id: 'TwoTowar',\n      name: 'Товар № 2',\n      composition: 'Состав: по ГОСТу',\n      price: 450,\n      image: TwoTowar\n    }, {\n      id: 'ThreeTowar',\n      name: 'Товар № 3',\n      composition: 'Состав: по ГОСТу',\n      price: 800,\n      image: ThreeTowar\n    }, {\n      id: 'FourthTowar',\n      name: 'Товар № 4',\n      composition: 'Состав по ГОСТу',\n      price: 600,\n      image: FourTowar\n    }]\n  }, {\n    id: 'macdac',\n    name: 'McDonal\\'s',\n    link: '/place/pizikiva-gallery/macdac',\n    description: 'Сеть ресторанов быстрого питания',\n    image: mcdac,\n    foods: [{\n      id: 'hamburger',\n      image: TwoTowar,\n      name: 'Гамбургер',\n      price: 50\n    }, {\n      id: 'bigmac',\n      image: ThreeTowar,\n      name: 'Биг мак',\n      price: 200\n    }]\n  }, {\n    id: 'subway',\n    name: 'SubWay',\n    link: '/place/pizikiva-gallery/subway',\n    image: sub,\n    description: 'Сеть ресторанов быстрого питания',\n    foods: [{\n      id: 'melt-sub',\n      image: ThreeTowar,\n      name: 'Сабвей мелт',\n      price: 300\n    }, {\n      id: 'day-sub',\n      image: OneTowar,\n      name: 'Саб дня',\n      price: 200\n    }]\n  }]\n}];\nconst placesMap = FOOD_AREAS.reduce((result, area) => {\n  area.items.forEach(item => {\n    result[item.link] = item;\n  });\n  return result;\n}, {});\nconst foodsMap = FOOD_AREAS.reduce((result, area) => {\n  area.items.forEach(item => {\n    item.foods.forEach(food => {\n      result[food.id] = food;\n    });\n  });\n  return result;\n}, {});\n\nconst App = () => {\n  const [orderStatuses, setOrderStatuses] = useState(JSON.parse(localStorage.getItem('orderStatuses') || 'null') || {});\n  const [order, setOrder] = useState(JSON.parse(localStorage.getItem('orders') || 'null') || {});\n  return /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: \"/\",\n    exact: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Home, {\n    foodAreas: FOOD_AREAS,\n    order: order,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 6\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/order/:areaId/:itemId\",\n    exact: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Order, {\n    foodAreas: FOOD_AREAS,\n    order: order,\n    setActiveOrder: ({\n      itemId\n    }) => {\n      const nextStatuses = { ...orderStatuses\n      };\n      nextStatuses[itemId] = 'ACTIVE';\n      setOrderStatuses(nextStatuses);\n      localStorage.setItem('orderStatuses', JSON.stringify(nextStatuses));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 6\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/basket/:areaId/:itemId\",\n    exact: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Basket, {\n    foodAreas: FOOD_AREAS,\n    order: order,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 6\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/orders\",\n    exact: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Orders, {\n    order: order,\n    orderStatuses: orderStatuses,\n    foodAreas: FOOD_AREAS,\n    setFinishedOrder: ({\n      itemId\n    }) => {\n      const nextStatuses = { ...orderStatuses\n      };\n      nextStatuses[itemId] = 'DONE';\n      setOrderStatuses(nextStatuses);\n      localStorage.setItem('orderStatuses', JSON.stringify(nextStatuses));\n    },\n    setActiveOrder: ({\n      itemId\n    }) => {\n      const nextStatuses = { ...orderStatuses\n      };\n      nextStatuses[itemId] = 'ACTIVE';\n      setOrderStatuses(nextStatuses);\n      localStorage.setItem('orderStatuses', JSON.stringify(nextStatuses));\n    },\n    setCanceledOrder: ({\n      itemId\n    }) => {\n      const nextStatuses = { ...orderStatuses\n      };\n      nextStatuses[itemId] = 'Canceled';\n      setOrderStatuses(nextStatuses);\n      localStorage.setItem('orderStatuses', JSON.stringify(nextStatuses));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 6\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/place/:area/:place\",\n    render: routeProps => {\n      return /*#__PURE__*/React.createElement(Place, Object.assign({}, routeProps, {\n        item: placesMap[routeProps.location.pathname],\n        area: FOOD_AREAS[0],\n        order: order,\n        onIncrementPosition: ({\n          id,\n          itemId,\n          areaId\n        }) => {\n          const updatedOrder = { ...order\n          };\n\n          if (id in updatedOrder) {\n            updatedOrder[id].count++;\n          } else {\n            updatedOrder[id] = {\n              item: foodsMap[id],\n              count: 1\n            };\n          }\n\n          let nextOrderStatuses = { ...orderStatuses\n          };\n\n          if (Object.keys(nextOrderStatuses).length === 0) {\n            FOOD_AREAS.forEach(area => {\n              area.items.forEach(item => {\n                item.foods.forEach(food => {\n                  if (food.id in order) {\n                    const status = item.id === itemId ? 'ACTIVE' : 'DONE';\n                    nextOrderStatuses[item.id] = status;\n                  }\n                });\n              });\n            });\n          }\n\n          const serialized = JSON.stringify(updatedOrder);\n          localStorage.setItem('orders', serialized);\n          localStorage.setItem('orderStatuses', JSON.stringify(nextOrderStatuses));\n          setOrder(updatedOrder);\n          setOrderStatuses(nextOrderStatuses);\n        },\n        onDecrementPosition: ({\n          id,\n          itemId,\n          areaId\n        }) => {\n          const updatedOrder = { ...order\n          };\n\n          if (id in updatedOrder) {\n            if (updatedOrder[id].count === 1) {\n              delete updatedOrder[id];\n            } else {\n              updatedOrder[id].count--;\n            }\n          }\n\n          let nextOrderStatuses = { ...orderStatuses\n          };\n\n          if (Object.keys(nextOrderStatuses).length === 0) {\n            FOOD_AREAS.forEach(area => {\n              area.items.forEach(item => {\n                item.foods.forEach(food => {\n                  if (food.id in order) {\n                    const status = item.id === itemId ? 'ACTIVE' : 'DONE';\n                    nextOrderStatuses[item.id] = status;\n                  }\n                });\n              });\n            });\n          }\n\n          const serialized = JSON.stringify(updatedOrder);\n          localStorage.setItem('orders', serialized);\n          localStorage.setItem('orderStatuses', JSON.stringify(nextOrderStatuses));\n          setOrder(updatedOrder);\n          setOrderStatuses(nextOrderStatuses);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 8\n        }\n      }));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 5\n    }\n  })));\n};\n\nexport default App;","map":{"version":3,"sources":["E:/Projects/hotfix_web/src/App.js"],"names":["React","useState","BrowserRouter","Router","Switch","Route","Home","Place","Basket","Order","Orders","kfc","burger","mcdac","sub","OneTowar","TwoTowar","ThreeTowar","FourTowar","FOOD_AREAS","id","name","items","link","description","image","foods","price","composition","placesMap","reduce","result","area","forEach","item","foodsMap","food","App","orderStatuses","setOrderStatuses","JSON","parse","localStorage","getItem","order","setOrder","itemId","nextStatuses","setItem","stringify","routeProps","location","pathname","areaId","updatedOrder","count","nextOrderStatuses","Object","keys","length","status","serialized"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\n\nimport Home from './panels/Home';\nimport Place from './panels/Place';\nimport Basket from './panels/Basket';\nimport Order from './panels/Order';\nimport Orders from './panels/Orders';\n\nimport './panels/App.css';\nimport kfc from './img/kfc.png';\nimport burger from './img/burger.png';\nimport mcdac from './img/mcdac.png';\nimport sub from './img/sub.png';\nimport OneTowar from './img/1.png';\nimport TwoTowar from './img/2.png';\nimport ThreeTowar from './img/3.png';\nimport FourTowar from './img/4.png';\n\n\nconst FOOD_AREAS = [{\n\tid: 'pizikiva-gallery',\n\tname: 'ТРЦ \"Им.Пыжикова\"',\n\titems: [{\n\t\tid: 'kfc',\n\t\tname: 'KFC',\n\t\tlink: '/place/pizikiva-gallery/kfc',\n\t\tdescription: 'Сеть ресторанов быстрого питания',\n\t\timage: kfc,\n\t\tfoods: [{\n\t\t\tid: 'classic',\n\t\t\timage: FourTowar,\n\t\t\tname: 'Классик',\n\t\t\tprice: 150,\n\t\t}, {\n\t\t\tid: 'bigmac',\n\t\t\timage: OneTowar,\n\t\t\tname: 'Картофель фри',\n\t\t\tprice: 50,\n\t\t}],\n\t}, {\n\t\tid: 'burger-king',\n\t\tname: 'Burger King',\n\t\tlink: '/place/pizikiva-gallery/burger-king',\n\t\tdescription: 'Сеть ресторанов быстрого питания',\n\t\timage: burger,\n\t\tfoods: [{\n\t\t\tid: 'OneTowar',\n\t\t\tname: 'Товар № 1',\n\t\t\tcomposition: 'Состав: по ГОСТу',\n\t\t\tprice: 630,\n\t\t\timage: OneTowar,\n\t\t}, {\n\t\t\tid: 'TwoTowar',\n\t\t\tname: 'Товар № 2',\n\t\t\tcomposition: 'Состав: по ГОСТу',\n\t\t\tprice: 450,\n\t\t\timage: TwoTowar,\n\t\t}, {\n\t\t\tid: 'ThreeTowar',\n\t\t\tname: 'Товар № 3',\n\t\t\tcomposition: 'Состав: по ГОСТу',\n\t\t\tprice: 800,\n\t\t\timage: ThreeTowar,\n\t\t}, {\n\t\t\tid: 'FourthTowar',\n\t\t\tname: 'Товар № 4',\n\t\t\tcomposition: 'Состав по ГОСТу',\n\t\t\tprice: 600,\n\t\t\timage: FourTowar,\n\t\t}],\n\t}, {\n\t\tid: 'macdac',\n\t\tname: 'McDonal\\'s',\n\t\tlink: '/place/pizikiva-gallery/macdac',\n\t\tdescription: 'Сеть ресторанов быстрого питания',\n\t\timage: mcdac,\n\t\tfoods: [{\n\t\t\tid: 'hamburger',\n\t\t\timage: TwoTowar,\n\t\t\tname: 'Гамбургер',\n\t\t\tprice: 50,\n\t\t}, {\n\t\t\tid: 'bigmac',\n\t\t\timage: ThreeTowar,\n\t\t\tname: 'Биг мак',\n\t\t\tprice: 200,\n\t\t}],\n\t}, {\n\t\tid: 'subway',\n\t\tname: 'SubWay',\n\t\tlink: '/place/pizikiva-gallery/subway',\n\t\timage: sub,\n\t\tdescription: 'Сеть ресторанов быстрого питания',\n\t\tfoods: [{\n\t\t\tid: 'melt-sub',\n\t\t\timage: ThreeTowar,\n\t\t\tname: 'Сабвей мелт',\n\t\t\tprice: 300,\n\t\t}, {\n\t\t\tid: 'day-sub',\n\t\t\timage: OneTowar,\n\t\t\tname: 'Саб дня',\n\t\t\tprice: 200,\n\t\t}],\n\t}],\n}];\n\nconst placesMap = FOOD_AREAS.reduce((result, area) => {\n\tarea.items.forEach(item => {\n\t\tresult[item.link] = item;\n\t});\n\n\treturn result;\n}, {});\n\nconst foodsMap = FOOD_AREAS.reduce((result, area) => {\n\tarea.items.forEach(item => {\n\t\titem.foods.forEach(food => {\n\t\t\tresult[food.id] = food;\n\t\t});\n\t});\n\n\treturn result;\n}, {});\n\nconst App = () => {\n\tconst [ orderStatuses, setOrderStatuses ] = useState(JSON.parse((localStorage.getItem('orderStatuses') || 'null')) || {});\n\tconst [ order, setOrder ] = useState(JSON.parse((localStorage.getItem('orders') || 'null')) || {});\n\n\treturn (\n\t\t<Router>\n\t\t\t<Switch>\n\t\t\t\t<Route path=\"/\" exact>\n\t\t\t\t\t<Home foodAreas={FOOD_AREAS} order={order} />\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/order/:areaId/:itemId\" exact>\n\t\t\t\t\t<Order\n\t\t\t\t\t\tfoodAreas={FOOD_AREAS}\n\t\t\t\t\t\torder={order}\n\t\t\t\t\t\tsetActiveOrder={({ itemId }) => {\n\t\t\t\t\t\t\tconst nextStatuses = {...orderStatuses};\n\n\t\t\t\t\t\t\tnextStatuses[itemId] = 'ACTIVE';\n\n\t\t\t\t\t\t\tsetOrderStatuses(nextStatuses);\n\t\t\t\t\t\t\tlocalStorage.setItem('orderStatuses', JSON.stringify(nextStatuses));\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/basket/:areaId/:itemId\" exact>\n\t\t\t\t\t<Basket\n\t\t\t\t\t\tfoodAreas={FOOD_AREAS}\n\t\t\t\t\t\torder={order}\n\t\t\t\t\t/>\n\t\t\t\t</Route>\n\t\t\t\t<Route\n\t\t\t\t\tpath=\"/orders\"\n\t\t\t\t\texact\n\t\t\t\t>\n\t\t\t\t\t<Orders \n\t\t\t\t\t\torder={order}\n\t\t\t\t\t\torderStatuses={orderStatuses}\n\t\t\t\t\t\tfoodAreas={FOOD_AREAS}\n\t\t\t\t\t\tsetFinishedOrder={({ itemId }) => {\n\t\t\t\t\t\t\tconst nextStatuses = {...orderStatuses};\n\n\t\t\t\t\t\t\tnextStatuses[itemId] = 'DONE';\n\n\t\t\t\t\t\t\tsetOrderStatuses(nextStatuses);\n\t\t\t\t\t\t\tlocalStorage.setItem('orderStatuses', JSON.stringify(nextStatuses));\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tsetActiveOrder={({ itemId }) => {\n\t\t\t\t\t\t\tconst nextStatuses = {...orderStatuses};\n\n\t\t\t\t\t\t\tnextStatuses[itemId] = 'ACTIVE';\n\n\t\t\t\t\t\t\tsetOrderStatuses(nextStatuses);\n\t\t\t\t\t\t\tlocalStorage.setItem('orderStatuses', JSON.stringify(nextStatuses));\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tsetCanceledOrder={({ itemId }) => {\n\t\t\t\t\t\t\tconst nextStatuses = {...orderStatuses};\n\n\t\t\t\t\t\t\tnextStatuses[itemId] = 'Canceled';\n\n\t\t\t\t\t\t\tsetOrderStatuses(nextStatuses);\n\t\t\t\t\t\t\tlocalStorage.setItem('orderStatuses', JSON.stringify(nextStatuses));\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</Route>\n\t\t\t\t<Route \n\t\t\t\t\tpath=\"/place/:area/:place\"\n\t\t\t\t\trender={routeProps => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Place\n\t\t\t\t\t\t\t\t{...routeProps}\n\t\t\t\t\t\t\t\titem={placesMap[routeProps.location.pathname]}\n\t\t\t\t\t\t\t\tarea={FOOD_AREAS[0]}\n\t\t\t\t\t\t\t\torder={order}\n\t\t\t\t\t\t\t\tonIncrementPosition={({ id, itemId, areaId }) => {\n\t\t\t\t\t\t\t\t\tconst updatedOrder = {...order};\n\n\t\t\t\t\t\t\t\t\tif (id in updatedOrder) {\n\t\t\t\t\t\t\t\t\t\tupdatedOrder[id].count++;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tupdatedOrder[id] = {\n\t\t\t\t\t\t\t\t\t\t\titem: foodsMap[id],\n\t\t\t\t\t\t\t\t\t\t\tcount: 1,\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tlet nextOrderStatuses = {...orderStatuses};\n\n\t\t\t\t\t\t\t\t\tif (Object.keys(nextOrderStatuses).length === 0) {\n\t\t\t\t\t\t\t\t\t\tFOOD_AREAS.forEach(area => {\n\t\t\t\t\t\t\t\t\t\t\tarea.items.forEach(item => {\n\t\t\t\t\t\t\t\t\t\t\t\titem.foods.forEach(food => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (food.id in order) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst status = item.id === itemId ? 'ACTIVE' : 'DONE';\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnextOrderStatuses[item.id] = status;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tconst serialized = JSON.stringify(updatedOrder);\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tlocalStorage.setItem('orders', serialized);\n\t\t\t\t\t\t\t\t\tlocalStorage.setItem('orderStatuses', JSON.stringify(nextOrderStatuses));\n\n\t\t\t\t\t\t\t\t\tsetOrder(updatedOrder);\n\t\t\t\t\t\t\t\t\tsetOrderStatuses(nextOrderStatuses);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonDecrementPosition={({ id, itemId, areaId }) => {\n\t\t\t\t\t\t\t\t\tconst updatedOrder = {...order};\n\n\t\t\t\t\t\t\t\t\tif (id in updatedOrder) {\n\t\t\t\t\t\t\t\t\t\tif (updatedOrder[id].count === 1) {\n\t\t\t\t\t\t\t\t\t\t\tdelete updatedOrder[id];\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tupdatedOrder[id].count--;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tlet nextOrderStatuses = {...orderStatuses};\n\n\t\t\t\t\t\t\t\t\tif (Object.keys(nextOrderStatuses).length === 0) {\n\t\t\t\t\t\t\t\t\t\tFOOD_AREAS.forEach(area => {\n\t\t\t\t\t\t\t\t\t\t\tarea.items.forEach(item => {\n\t\t\t\t\t\t\t\t\t\t\t\titem.foods.forEach(food => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (food.id in order) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst status = item.id === itemId ? 'ACTIVE' : 'DONE';\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnextOrderStatuses[item.id] = status;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tconst serialized = JSON.stringify(updatedOrder);\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tlocalStorage.setItem('orders', serialized);\n\t\t\t\t\t\t\t\t\tlocalStorage.setItem('orderStatuses', JSON.stringify(nextOrderStatuses));\n\n\t\t\t\t\t\t\t\t\tsetOrder(updatedOrder);\n\t\t\t\t\t\t\t\t\tsetOrderStatuses(nextOrderStatuses);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Switch>\n\t\t</Router>\n\t);\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}
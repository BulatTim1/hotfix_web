{"ast":null,"code":"import React,{useMemo}from'react';import{Link}from'react-router-dom';import refresh from\"../img/refresh-button.svg\";import'./orders.css';var Orders=function Orders(_ref){var order=_ref.order,orderStatuses=_ref.orderStatuses,foodAreas=_ref.foodAreas,setFinishedOrder=_ref.setFinishedOrder,setActiveOrder=_ref.setActiveOrder,setCanceledOrder=_ref.setCanceledOrder;var activeOrders=useMemo(function(){var activeOrdersList=Object.keys(orderStatuses).filter(function(shopId){return orderStatuses[shopId]==='ACTIVE';}).map(function(shopId){return shopId;});var result=[];var activeOrdersSet=new Set(activeOrdersList);foodAreas.forEach(function(area){area.items.forEach(function(item){if(activeOrdersSet.has(item.id)){var data={placeId:area.id,placeName:area.name,shopId:item.id,shopName:item.name,price:item.foods.reduce(function(result,food){if(food.id in order){var _order$food$id=order[food.id],price=_order$food$id.item.price,count=_order$food$id.count;return result+parseInt(price)*parseInt(count);}return result;},0),link:\"/order/\".concat(area.id,\"/\").concat(item.id)};result.push(data);}});});return result;},[order,orderStatuses,foodAreas]);var finishedOrders=useMemo(function(){var activeOrdersList=Object.keys(orderStatuses).filter(function(shopId){return orderStatuses[shopId]!=='ACTIVE';}).map(function(shopId){return shopId;});var result=[];var activeOrdersSet=new Set(activeOrdersList);foodAreas.forEach(function(area){area.items.forEach(function(item){if(activeOrdersSet.has(item.id)){var data={placeName:area.name,shopName:item.name,shopId:item.id,price:item.foods.reduce(function(result,food){if(food.id in order){var _order$food$id2=order[food.id],price=_order$food$id2.item.price,count=_order$food$id2.count;return result+parseInt(price)*parseInt(count);}return result;},0),link:\"/order/\".concat(area.id,\"/\").concat(item.id)};result.push(data);}});});return result;},[order,orderStatuses,foodAreas]);return/*#__PURE__*/React.createElement(\"div\",{className:\"Orders\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"Orders__active-orders\"},activeOrders.map(function(order){return/*#__PURE__*/React.createElement(\"li\",{className:\"Orders__active-order\",key:order.link},/*#__PURE__*/React.createElement(\"div\",{className:\"Orders__left\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"Orders__header\"},order.placeName),/*#__PURE__*/React.createElement(\"p\",{className:\"Orders__shop-name\"},order.shopName),/*#__PURE__*/React.createElement(\"p\",{className:\"Orders__price\"},\"\\u0421\\u0443\\u043C\\u043C\\u0430 \",order.price,\" - \\u041E\\u043F\\u043B\\u0430\\u0447\\u0435\\u043D\\u043E\")),/*#__PURE__*/React.createElement(\"div\",{className:\"Orders__time\"},\"~ 15 \\u041C\"),/*#__PURE__*/React.createElement(Link,{className:\"Orders__change\",to:\"/place/\".concat(order.placeId,\"/\").concat(order.shopId)},\"\\u0418\\u0437\\u043C\"),/*#__PURE__*/React.createElement(\"button\",{className:\"Orders__cancel\",onClick:function onClick(){setCanceledOrder({itemId:order.shopId});}},\"\\u041E\\u0442\\u043C.\"));})),/*#__PURE__*/React.createElement(\"ul\",{className:\"Orders__finished-orders\"},finishedOrders.map(function(order){return/*#__PURE__*/React.createElement(\"li\",{className:\"Orders__finished-order\",key:order.link},/*#__PURE__*/React.createElement(\"div\",{className:\"Orders__left\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"Orders__header Orders__dark\"},order.placeName),/*#__PURE__*/React.createElement(\"p\",{className:\"Orders__shop-name Orders__pink\"},order.shopName),/*#__PURE__*/React.createElement(\"p\",{className:\"Orders__price Orders__pink\"},\"\\u0421\\u0443\\u043C\\u043C\\u0430 \",order.price,\" - \\u041E\\u043F\\u043B\\u0430\\u0447\\u0435\\u043D\\u043E\")),/*#__PURE__*/React.createElement(\"button\",{className:\"Orders__repeat\",onClick:function onClick(){setActiveOrder({itemId:order.shopId});}},/*#__PURE__*/React.createElement(\"img\",{className:\"Orders__refresh\",alt:\"repeat order\",src:refresh})));})));};Orders.defaultProps={setFinishedOrder:function setFinishedOrder(){},setActiveOrder:function setActiveOrder(){},setCanceledOrder:function setCanceledOrder(){}};export default Orders;","map":{"version":3,"sources":["E:/Projects/hotfix_web/src/panels/Orders.js"],"names":["React","useMemo","Link","Orders","order","orderStatuses","foodAreas","setFinishedOrder","setActiveOrder","setCanceledOrder","activeOrders","activeOrdersList","Object","keys","filter","shopId","map","result","activeOrdersSet","Set","forEach","area","items","item","has","id","data","placeId","placeName","name","shopName","price","foods","reduce","food","count","parseInt","link","push","finishedOrders","itemId","refresh","defaultProps"],"mappings":"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","sourcesContent":["import React, { useMemo } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport refresh from '../img/refresh-button.svg';\nimport './orders.css';\n\n\nconst Orders = ({ order, orderStatuses, foodAreas, setFinishedOrder, setActiveOrder, setCanceledOrder }) => {\n  const activeOrders = useMemo(() => {\n    const activeOrdersList = Object.keys(orderStatuses)\n      .filter(shopId => orderStatuses[shopId] === 'ACTIVE')\n      .map(shopId => shopId);\n\n    const result = [];\n    const activeOrdersSet = new Set(activeOrdersList);\n\n    foodAreas.forEach((area) => {\n      area.items.forEach(item => {\n        if (activeOrdersSet.has(item.id)) {\n          const data = {\n            placeId: area.id,\n            placeName: area.name,\n            shopId: item.id,\n            shopName: item.name,\n            price: item.foods.reduce((result, food) => {\n              if (food.id in order) {\n                const { item: { price }, count } = order[food.id];\n\n                return result + parseInt(price) * parseInt(count);\n              }\n\n              return result;\n            }, 0),\n            link: `/order/${area.id}/${item.id}`,\n          };\n\n          result.push(data);\n        }\n      });\n    });\n\n    return result;\n  }, [ order, orderStatuses, foodAreas ]);\n\n  const finishedOrders = useMemo(() => {\n    const activeOrdersList = Object.keys(orderStatuses)\n      .filter(shopId => orderStatuses[shopId] !== 'ACTIVE')\n      .map(shopId => shopId);\n\n    const result = [];\n    const activeOrdersSet = new Set(activeOrdersList);\n\n    foodAreas.forEach((area) => {\n      area.items.forEach(item => {\n        if (activeOrdersSet.has(item.id)) {\n          const data = {\n            placeName: area.name,\n            shopName: item.name,\n            shopId: item.id,\n            price: item.foods.reduce((result, food) => {\n              if (food.id in order) {\n                const { item: { price }, count } = order[food.id];\n\n                return result + parseInt(price) * parseInt(count);\n              }\n\n              return result;\n            }, 0),\n            link: `/order/${area.id}/${item.id}`,\n          };\n\n          result.push(data);\n        }\n      });\n    });\n\n    return result;\n  }, [ order, orderStatuses, foodAreas ]);\n\n  return (\n    <div className=\"Orders\">\n      <ul className=\"Orders__active-orders\">\n        {activeOrders.map(order => (\n          <li\n            className=\"Orders__active-order\"\n            key={order.link}\n          >\n            <div className=\"Orders__left\">\n              <h3 className=\"Orders__header\">{order.placeName}</h3>\n              <p className=\"Orders__shop-name\">{order.shopName}</p>\n              <p className=\"Orders__price\">Сумма {order.price} - Оплачено</p>\n            </div>\n            <div className=\"Orders__time\">\n              ~ 15 М\n            </div>\n            <Link\n              className=\"Orders__change\"\n              to={`/place/${order.placeId}/${order.shopId}`}\n            >\n              Изм\n            </Link>\n            <button\n              className=\"Orders__cancel\"\n              onClick={() => {\n                setCanceledOrder({ itemId: order.shopId });\n              }}\n            >\n              Отм.\n            </button>\n          </li>\n        ))}\n      </ul>\n      <ul className=\"Orders__finished-orders\">\n        {finishedOrders.map(order => (\n          <li\n            className=\"Orders__finished-order\"\n            key={order.link}\n          >\n            <div className=\"Orders__left\">\n              <h3 className=\"Orders__header Orders__dark\">{order.placeName}</h3>\n              <p className=\"Orders__shop-name Orders__pink\">{order.shopName}</p>\n              <p className=\"Orders__price Orders__pink\">Сумма {order.price} - Оплачено</p>\n            </div>\n            <button\n              className=\"Orders__repeat\"\n              onClick={() => {\n                setActiveOrder({ itemId: order.shopId });\n              }}\n            >\n              <img\n                className=\"Orders__refresh\"\n                alt=\"repeat order\"\n                src={refresh}\n              />\n            </button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nOrders.defaultProps = {\n  setFinishedOrder: () => {},\n  setActiveOrder: () => {},\n  setCanceledOrder: () => {},\n};\n\nexport default Orders;\n"]},"metadata":{},"sourceType":"module"}
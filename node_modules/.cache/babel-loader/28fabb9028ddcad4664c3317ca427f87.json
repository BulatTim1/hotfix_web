{"ast":null,"code":"import _objectSpread from\"E:\\\\Projects\\\\hotfix_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"E:\\\\Projects\\\\hotfix_web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{BrowserRouter as Router,Switch,Route}from'react-router-dom';import Home from'./panels/Home';import Place from'./panels/Place';import Basket from'./panels/Basket';import Order from'./panels/Order';import Orders from'./panels/Orders';import'./panels/App.css';import kfc from'./img/kfc.png';import burger from'./img/burger.png';import mcdac from'./img/mcdac.png';import sub from'./img/sub.png';import OneTowar from'./img/1.png';import TwoTowar from'./img/2.png';import ThreeTowar from'./img/3.png';import FourTowar from'./img/4.png';var FOOD_AREAS=[{id:'pizikiva-gallery',name:'ТРЦ \"Им.Пыжикова\"',items:[{id:'kfc',name:'KFC',link:'/place/pizikiva-gallery/kfc',description:'Сеть ресторанов быстрого питания',image:kfc,foods:[{id:'classic',image:FourTowar,name:'Классик',price:150},{id:'fries',image:OneTowar,name:'Картофель фри',price:50}]},{id:'burger-king',name:'Burger King',link:'/place/pizikiva-gallery/burger-king',description:'Сеть ресторанов быстрого питания',image:burger,foods:[{id:'OneTowar',name:'Товар № 1',composition:'Состав: по ГОСТу',price:630,image:OneTowar},{id:'TwoTowar',name:'Товар № 2',composition:'Состав: по ГОСТу',price:450,image:TwoTowar},{id:'ThreeTowar',name:'Товар № 3',composition:'Состав: по ГОСТу',price:800,image:ThreeTowar},{id:'FourthTowar',name:'Товар № 4',composition:'Состав по ГОСТу',price:600,image:FourTowar}]},{id:'macdac',name:'McDonal\\'s',link:'/place/pizikiva-gallery/macdac',description:'Сеть ресторанов быстрого питания',image:mcdac,foods:[{id:'hamburger',image:TwoTowar,name:'Гамбургер',price:50},{id:'bigmac',image:ThreeTowar,name:'Биг мак',price:200}]},{id:'subway',name:'SubWay',link:'/place/pizikiva-gallery/subway',image:sub,description:'Сеть ресторанов быстрого питания',foods:[{id:'melt-sub',image:ThreeTowar,name:'Сабвей мелт',price:300},{id:'day-sub',image:OneTowar,name:'Саб дня',price:200}]}]}];var placesMap=FOOD_AREAS.reduce(function(result,area){area.items.forEach(function(item){result[item.link]=item;});return result;},{});var foodsMap=FOOD_AREAS.reduce(function(result,area){area.items.forEach(function(item){item.foods.forEach(function(food){result[food.id]=food;});});return result;},{});var App=function App(){var _useState=useState(JSON.parse(localStorage.getItem('orderStatuses')||'null')||{}),_useState2=_slicedToArray(_useState,2),orderStatuses=_useState2[0],setOrderStatuses=_useState2[1];var _useState3=useState(JSON.parse(localStorage.getItem('orders')||'null')||{}),_useState4=_slicedToArray(_useState3,2),order=_useState4[0],setOrder=_useState4[1];localStorage.getItem('settings')||localStorage.setItem('settings',JSON.stringify({'kfc':{'faster':true,'time':'00:00','selfService':true},'macdak':{'faster':true,'time':'00:00','selfService':true},'subway':{'faster':true,'time':'00:00','selfService':true},'burger-king':{'faster':true,'time':'00:00','selfService':true}}));return/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{path:\"/\",exact:true},/*#__PURE__*/React.createElement(Home,{foodAreas:FOOD_AREAS,order:order})),/*#__PURE__*/React.createElement(Route,{path:\"/order/:areaId/:itemId\",exact:true},/*#__PURE__*/React.createElement(Order,{foodAreas:FOOD_AREAS,order:order,setActiveOrder:function setActiveOrder(_ref){var itemId=_ref.itemId;var nextStatuses=_objectSpread({},orderStatuses);nextStatuses[itemId]='ACTIVE';setOrderStatuses(nextStatuses);localStorage.setItem('orderStatuses',JSON.stringify(nextStatuses));}})),/*#__PURE__*/React.createElement(Route,{path:\"/basket/:areaId/:itemId\",exact:true},/*#__PURE__*/React.createElement(Basket,{foodAreas:FOOD_AREAS,order:order})),/*#__PURE__*/React.createElement(Route,{path:\"/orders\",exact:true},/*#__PURE__*/React.createElement(Orders,{order:order,orderStatuses:orderStatuses,foodAreas:FOOD_AREAS,setFinishedOrder:function setFinishedOrder(_ref2){var itemId=_ref2.itemId;var nextStatuses=_objectSpread({},orderStatuses);nextStatuses[itemId]='DONE';setOrderStatuses(nextStatuses);localStorage.setItem('orderStatuses',JSON.stringify(nextStatuses));},setActiveOrder:function setActiveOrder(_ref3){var itemId=_ref3.itemId;var nextStatuses=_objectSpread({},orderStatuses);nextStatuses[itemId]='ACTIVE';setOrderStatuses(nextStatuses);localStorage.setItem('orderStatuses',JSON.stringify(nextStatuses));},setCanceledOrder:function setCanceledOrder(_ref4){var itemId=_ref4.itemId;var nextStatuses=_objectSpread({},orderStatuses);nextStatuses[itemId]='CANCELED';setOrderStatuses(nextStatuses);localStorage.setItem('orderStatuses',JSON.stringify(nextStatuses));}})),/*#__PURE__*/React.createElement(Route,{path:\"/place/:area/:place\",render:function render(routeProps){return/*#__PURE__*/React.createElement(Place,Object.assign({},routeProps,{item:placesMap[routeProps.location.pathname],area:FOOD_AREAS[0],order:order,onIncrementPosition:function onIncrementPosition(_ref5){var id=_ref5.id,itemId=_ref5.itemId,areaId=_ref5.areaId;var updatedOrder=_objectSpread({},order);if(id in updatedOrder){updatedOrder[id].count++;}else{updatedOrder[id]={item:foodsMap[id],count:1};}var nextOrderStatuses=_objectSpread({},orderStatuses);if(Object.keys(nextOrderStatuses).length===0){FOOD_AREAS.forEach(function(area){area.items.forEach(function(item){item.foods.forEach(function(food){if(food.id in order){var status=item.id===itemId?'ACTIVE':'DONE';nextOrderStatuses[item.id]=status;}});});});}var serialized=JSON.stringify(updatedOrder);localStorage.setItem('orders',serialized);localStorage.setItem('orderStatuses',JSON.stringify(nextOrderStatuses));setOrder(updatedOrder);setOrderStatuses(nextOrderStatuses);},onDecrementPosition:function onDecrementPosition(_ref6){var id=_ref6.id,itemId=_ref6.itemId,areaId=_ref6.areaId;var updatedOrder=_objectSpread({},order);if(id in updatedOrder){if(updatedOrder[id].count===1){delete updatedOrder[id];}else{updatedOrder[id].count--;}}var nextOrderStatuses=_objectSpread({},orderStatuses);if(Object.keys(nextOrderStatuses).length===0){FOOD_AREAS.forEach(function(area){area.items.forEach(function(item){item.foods.forEach(function(food){if(food.id in order){var status=item.id===itemId?'ACTIVE':'DONE';nextOrderStatuses[item.id]=status;}});});});}var serialized=JSON.stringify(updatedOrder);localStorage.setItem('orders',serialized);localStorage.setItem('orderStatuses',JSON.stringify(nextOrderStatuses));setOrder(updatedOrder);setOrderStatuses(nextOrderStatuses);}}));}})));};export default App;","map":{"version":3,"sources":["E:/Projects/hotfix_web/src/App.js"],"names":["React","useState","BrowserRouter","Router","Switch","Route","Home","Place","Basket","Order","Orders","kfc","burger","mcdac","sub","OneTowar","TwoTowar","ThreeTowar","FourTowar","FOOD_AREAS","id","name","items","link","description","image","foods","price","composition","placesMap","reduce","result","area","forEach","item","foodsMap","food","App","JSON","parse","localStorage","getItem","orderStatuses","setOrderStatuses","order","setOrder","setItem","stringify","itemId","nextStatuses","routeProps","location","pathname","areaId","updatedOrder","count","nextOrderStatuses","Object","keys","length","status","serialized"],"mappings":"uSAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,aAAa,GAAIC,CAAAA,MAA1B,CAAkCC,MAAlC,CAA0CC,KAA1C,KAAuD,kBAAvD,CAEA,MAAOC,CAAAA,IAAP,KAAiB,eAAjB,CACA,MAAOC,CAAAA,KAAP,KAAkB,gBAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,iBAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,gBAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,iBAAnB,CAEA,MAAO,kBAAP,CACA,MAAOC,CAAAA,GAAP,KAAgB,eAAhB,CACA,MAAOC,CAAAA,MAAP,KAAmB,kBAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,iBAAlB,CACA,MAAOC,CAAAA,GAAP,KAAgB,eAAhB,CACA,MAAOC,CAAAA,QAAP,KAAqB,aAArB,CACA,MAAOC,CAAAA,QAAP,KAAqB,aAArB,CACA,MAAOC,CAAAA,UAAP,KAAuB,aAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CAGA,GAAMC,CAAAA,UAAU,CAAG,CAAC,CACnBC,EAAE,CAAE,kBADe,CAEnBC,IAAI,CAAE,mBAFa,CAGnBC,KAAK,CAAE,CAAC,CACPF,EAAE,CAAE,KADG,CAEPC,IAAI,CAAE,KAFC,CAGPE,IAAI,CAAE,6BAHC,CAIPC,WAAW,CAAE,kCAJN,CAKPC,KAAK,CAAEd,GALA,CAMPe,KAAK,CAAE,CAAC,CACPN,EAAE,CAAE,SADG,CAEPK,KAAK,CAAEP,SAFA,CAGPG,IAAI,CAAE,SAHC,CAIPM,KAAK,CAAE,GAJA,CAAD,CAKJ,CACFP,EAAE,CAAE,OADF,CAEFK,KAAK,CAAEV,QAFL,CAGFM,IAAI,CAAE,eAHJ,CAIFM,KAAK,CAAE,EAJL,CALI,CANA,CAAD,CAiBJ,CACFP,EAAE,CAAE,aADF,CAEFC,IAAI,CAAE,aAFJ,CAGFE,IAAI,CAAE,qCAHJ,CAIFC,WAAW,CAAE,kCAJX,CAKFC,KAAK,CAAEb,MALL,CAMFc,KAAK,CAAE,CAAC,CACPN,EAAE,CAAE,UADG,CAEPC,IAAI,CAAE,WAFC,CAGPO,WAAW,CAAE,kBAHN,CAIPD,KAAK,CAAE,GAJA,CAKPF,KAAK,CAAEV,QALA,CAAD,CAMJ,CACFK,EAAE,CAAE,UADF,CAEFC,IAAI,CAAE,WAFJ,CAGFO,WAAW,CAAE,kBAHX,CAIFD,KAAK,CAAE,GAJL,CAKFF,KAAK,CAAET,QALL,CANI,CAYJ,CACFI,EAAE,CAAE,YADF,CAEFC,IAAI,CAAE,WAFJ,CAGFO,WAAW,CAAE,kBAHX,CAIFD,KAAK,CAAE,GAJL,CAKFF,KAAK,CAAER,UALL,CAZI,CAkBJ,CACFG,EAAE,CAAE,aADF,CAEFC,IAAI,CAAE,WAFJ,CAGFO,WAAW,CAAE,iBAHX,CAIFD,KAAK,CAAE,GAJL,CAKFF,KAAK,CAAEP,SALL,CAlBI,CANL,CAjBI,CAgDJ,CACFE,EAAE,CAAE,QADF,CAEFC,IAAI,CAAE,YAFJ,CAGFE,IAAI,CAAE,gCAHJ,CAIFC,WAAW,CAAE,kCAJX,CAKFC,KAAK,CAAEZ,KALL,CAMFa,KAAK,CAAE,CAAC,CACPN,EAAE,CAAE,WADG,CAEPK,KAAK,CAAET,QAFA,CAGPK,IAAI,CAAE,WAHC,CAIPM,KAAK,CAAE,EAJA,CAAD,CAKJ,CACFP,EAAE,CAAE,QADF,CAEFK,KAAK,CAAER,UAFL,CAGFI,IAAI,CAAE,SAHJ,CAIFM,KAAK,CAAE,GAJL,CALI,CANL,CAhDI,CAiEJ,CACFP,EAAE,CAAE,QADF,CAEFC,IAAI,CAAE,QAFJ,CAGFE,IAAI,CAAE,gCAHJ,CAIFE,KAAK,CAAEX,GAJL,CAKFU,WAAW,CAAE,kCALX,CAMFE,KAAK,CAAE,CAAC,CACPN,EAAE,CAAE,UADG,CAEPK,KAAK,CAAER,UAFA,CAGPI,IAAI,CAAE,aAHC,CAIPM,KAAK,CAAE,GAJA,CAAD,CAKJ,CACFP,EAAE,CAAE,SADF,CAEFK,KAAK,CAAEV,QAFL,CAGFM,IAAI,CAAE,SAHJ,CAIFM,KAAK,CAAE,GAJL,CALI,CANL,CAjEI,CAHY,CAAD,CAAnB,CAwFA,GAAME,CAAAA,SAAS,CAAGV,UAAU,CAACW,MAAX,CAAkB,SAACC,MAAD,CAASC,IAAT,CAAkB,CACrDA,IAAI,CAACV,KAAL,CAAWW,OAAX,CAAmB,SAAAC,IAAI,CAAI,CAC1BH,MAAM,CAACG,IAAI,CAACX,IAAN,CAAN,CAAoBW,IAApB,CACA,CAFD,EAIA,MAAOH,CAAAA,MAAP,CACA,CANiB,CAMf,EANe,CAAlB,CAQA,GAAMI,CAAAA,QAAQ,CAAGhB,UAAU,CAACW,MAAX,CAAkB,SAACC,MAAD,CAASC,IAAT,CAAkB,CACpDA,IAAI,CAACV,KAAL,CAAWW,OAAX,CAAmB,SAAAC,IAAI,CAAI,CAC1BA,IAAI,CAACR,KAAL,CAAWO,OAAX,CAAmB,SAAAG,IAAI,CAAI,CAC1BL,MAAM,CAACK,IAAI,CAAChB,EAAN,CAAN,CAAkBgB,IAAlB,CACA,CAFD,EAGA,CAJD,EAMA,MAAOL,CAAAA,MAAP,CACA,CARgB,CAQd,EARc,CAAjB,CAUA,GAAMM,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,EAAM,eAC2BpC,QAAQ,CAACqC,IAAI,CAACC,KAAL,CAAYC,YAAY,CAACC,OAAb,CAAqB,eAArB,GAAyC,MAArD,GAAiE,EAAlE,CADnC,wCACTC,aADS,eACMC,gBADN,8BAEW1C,QAAQ,CAACqC,IAAI,CAACC,KAAL,CAAYC,YAAY,CAACC,OAAb,CAAqB,QAArB,GAAkC,MAA9C,GAA0D,EAA3D,CAFnB,yCAETG,KAFS,eAEFC,QAFE,eAGjBL,YAAY,CAACC,OAAb,CAAqB,UAArB,GAAoCD,YAAY,CAACM,OAAb,CAAqB,UAArB,CAAiCR,IAAI,CAACS,SAAL,CAAe,CAAC,MAAO,CAAC,SAAU,IAAX,CAAiB,OAAQ,OAAzB,CAAkC,cAAe,IAAjD,CAAR,CAAgE,SAAU,CAAC,SAAU,IAAX,CAAiB,OAAQ,OAAzB,CAAkC,cAAe,IAAjD,CAA1E,CAAkI,SAAU,CAAC,SAAU,IAAX,CAAiB,OAAQ,OAAzB,CAAkC,cAAe,IAAjD,CAA5I,CAAoM,cAAe,CAAC,SAAU,IAAX,CAAiB,OAAQ,OAAzB,CAAkC,cAAe,IAAjD,CAAnN,CAAf,CAAjC,CAApC,CACA,mBACC,oBAAC,MAAD,mBACC,oBAAC,MAAD,mBACC,oBAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,KAAK,KAArB,eACC,oBAAC,IAAD,EAAM,SAAS,CAAE5B,UAAjB,CAA6B,KAAK,CAAEyB,KAApC,EADD,CADD,cAIC,oBAAC,KAAD,EAAO,IAAI,CAAC,wBAAZ,CAAqC,KAAK,KAA1C,eACC,oBAAC,KAAD,EACC,SAAS,CAAEzB,UADZ,CAEC,KAAK,CAAEyB,KAFR,CAGC,cAAc,CAAE,6BAAgB,IAAbI,CAAAA,MAAa,MAAbA,MAAa,CAC/B,GAAMC,CAAAA,YAAY,kBAAOP,aAAP,CAAlB,CAEAO,YAAY,CAACD,MAAD,CAAZ,CAAuB,QAAvB,CAEAL,gBAAgB,CAACM,YAAD,CAAhB,CACAT,YAAY,CAACM,OAAb,CAAqB,eAArB,CAAsCR,IAAI,CAACS,SAAL,CAAeE,YAAf,CAAtC,EACA,CAVF,EADD,CAJD,cAkBC,oBAAC,KAAD,EAAO,IAAI,CAAC,yBAAZ,CAAsC,KAAK,KAA3C,eACC,oBAAC,MAAD,EACC,SAAS,CAAE9B,UADZ,CAEC,KAAK,CAAEyB,KAFR,EADD,CAlBD,cAwBC,oBAAC,KAAD,EACC,IAAI,CAAC,SADN,CAEC,KAAK,KAFN,eAIC,oBAAC,MAAD,EACC,KAAK,CAAEA,KADR,CAEC,aAAa,CAAEF,aAFhB,CAGC,SAAS,CAAEvB,UAHZ,CAIC,gBAAgB,CAAE,gCAAgB,IAAb6B,CAAAA,MAAa,OAAbA,MAAa,CACjC,GAAMC,CAAAA,YAAY,kBAAOP,aAAP,CAAlB,CAEAO,YAAY,CAACD,MAAD,CAAZ,CAAuB,MAAvB,CAEAL,gBAAgB,CAACM,YAAD,CAAhB,CACAT,YAAY,CAACM,OAAb,CAAqB,eAArB,CAAsCR,IAAI,CAACS,SAAL,CAAeE,YAAf,CAAtC,EACA,CAXF,CAYC,cAAc,CAAE,8BAAgB,IAAbD,CAAAA,MAAa,OAAbA,MAAa,CAC/B,GAAMC,CAAAA,YAAY,kBAAOP,aAAP,CAAlB,CAEAO,YAAY,CAACD,MAAD,CAAZ,CAAuB,QAAvB,CAEAL,gBAAgB,CAACM,YAAD,CAAhB,CACAT,YAAY,CAACM,OAAb,CAAqB,eAArB,CAAsCR,IAAI,CAACS,SAAL,CAAeE,YAAf,CAAtC,EACA,CAnBF,CAoBC,gBAAgB,CAAE,gCAAgB,IAAbD,CAAAA,MAAa,OAAbA,MAAa,CACjC,GAAMC,CAAAA,YAAY,kBAAOP,aAAP,CAAlB,CAEAO,YAAY,CAACD,MAAD,CAAZ,CAAuB,UAAvB,CAEAL,gBAAgB,CAACM,YAAD,CAAhB,CACAT,YAAY,CAACM,OAAb,CAAqB,eAArB,CAAsCR,IAAI,CAACS,SAAL,CAAeE,YAAf,CAAtC,EACA,CA3BF,EAJD,CAxBD,cA0DC,oBAAC,KAAD,EACC,IAAI,CAAC,qBADN,CAEC,MAAM,CAAE,gBAAAC,UAAU,CAAI,CACrB,mBACC,oBAAC,KAAD,kBACKA,UADL,EAEC,IAAI,CAAErB,SAAS,CAACqB,UAAU,CAACC,QAAX,CAAoBC,QAArB,CAFhB,CAGC,IAAI,CAAEjC,UAAU,CAAC,CAAD,CAHjB,CAIC,KAAK,CAAEyB,KAJR,CAKC,mBAAmB,CAAE,mCAA4B,IAAzBxB,CAAAA,EAAyB,OAAzBA,EAAyB,CAArB4B,MAAqB,OAArBA,MAAqB,CAAbK,MAAa,OAAbA,MAAa,CAChD,GAAMC,CAAAA,YAAY,kBAAOV,KAAP,CAAlB,CAEA,GAAIxB,EAAE,GAAIkC,CAAAA,YAAV,CAAwB,CACvBA,YAAY,CAAClC,EAAD,CAAZ,CAAiBmC,KAAjB,GACA,CAFD,IAEO,CACND,YAAY,CAAClC,EAAD,CAAZ,CAAmB,CAClBc,IAAI,CAAEC,QAAQ,CAACf,EAAD,CADI,CAElBmC,KAAK,CAAE,CAFW,CAAnB,CAIA,CAED,GAAIC,CAAAA,iBAAiB,kBAAOd,aAAP,CAArB,CAEA,GAAIe,MAAM,CAACC,IAAP,CAAYF,iBAAZ,EAA+BG,MAA/B,GAA0C,CAA9C,CAAiD,CAChDxC,UAAU,CAACc,OAAX,CAAmB,SAAAD,IAAI,CAAI,CAC1BA,IAAI,CAACV,KAAL,CAAWW,OAAX,CAAmB,SAAAC,IAAI,CAAI,CAC1BA,IAAI,CAACR,KAAL,CAAWO,OAAX,CAAmB,SAAAG,IAAI,CAAI,CAC1B,GAAIA,IAAI,CAAChB,EAAL,GAAWwB,CAAAA,KAAf,CAAsB,CACrB,GAAMgB,CAAAA,MAAM,CAAG1B,IAAI,CAACd,EAAL,GAAY4B,MAAZ,CAAqB,QAArB,CAAgC,MAA/C,CAEAQ,iBAAiB,CAACtB,IAAI,CAACd,EAAN,CAAjB,CAA6BwC,MAA7B,CACA,CACD,CAND,EAOA,CARD,EASA,CAVD,EAWA,CAED,GAAMC,CAAAA,UAAU,CAAGvB,IAAI,CAACS,SAAL,CAAeO,YAAf,CAAnB,CAEAd,YAAY,CAACM,OAAb,CAAqB,QAArB,CAA+Be,UAA/B,EACArB,YAAY,CAACM,OAAb,CAAqB,eAArB,CAAsCR,IAAI,CAACS,SAAL,CAAeS,iBAAf,CAAtC,EAEAX,QAAQ,CAACS,YAAD,CAAR,CACAX,gBAAgB,CAACa,iBAAD,CAAhB,CACA,CAxCF,CAyCC,mBAAmB,CAAE,mCAA4B,IAAzBpC,CAAAA,EAAyB,OAAzBA,EAAyB,CAArB4B,MAAqB,OAArBA,MAAqB,CAAbK,MAAa,OAAbA,MAAa,CAChD,GAAMC,CAAAA,YAAY,kBAAOV,KAAP,CAAlB,CAEA,GAAIxB,EAAE,GAAIkC,CAAAA,YAAV,CAAwB,CACvB,GAAIA,YAAY,CAAClC,EAAD,CAAZ,CAAiBmC,KAAjB,GAA2B,CAA/B,CAAkC,CACjC,MAAOD,CAAAA,YAAY,CAAClC,EAAD,CAAnB,CACA,CAFD,IAEO,CACNkC,YAAY,CAAClC,EAAD,CAAZ,CAAiBmC,KAAjB,GACA,CACD,CAED,GAAIC,CAAAA,iBAAiB,kBAAOd,aAAP,CAArB,CAEA,GAAIe,MAAM,CAACC,IAAP,CAAYF,iBAAZ,EAA+BG,MAA/B,GAA0C,CAA9C,CAAiD,CAChDxC,UAAU,CAACc,OAAX,CAAmB,SAAAD,IAAI,CAAI,CAC1BA,IAAI,CAACV,KAAL,CAAWW,OAAX,CAAmB,SAAAC,IAAI,CAAI,CAC1BA,IAAI,CAACR,KAAL,CAAWO,OAAX,CAAmB,SAAAG,IAAI,CAAI,CAC1B,GAAIA,IAAI,CAAChB,EAAL,GAAWwB,CAAAA,KAAf,CAAsB,CACrB,GAAMgB,CAAAA,MAAM,CAAG1B,IAAI,CAACd,EAAL,GAAY4B,MAAZ,CAAqB,QAArB,CAAgC,MAA/C,CAEAQ,iBAAiB,CAACtB,IAAI,CAACd,EAAN,CAAjB,CAA6BwC,MAA7B,CACA,CACD,CAND,EAOA,CARD,EASA,CAVD,EAWA,CAED,GAAMC,CAAAA,UAAU,CAAGvB,IAAI,CAACS,SAAL,CAAeO,YAAf,CAAnB,CAEAd,YAAY,CAACM,OAAb,CAAqB,QAArB,CAA+Be,UAA/B,EACArB,YAAY,CAACM,OAAb,CAAqB,eAArB,CAAsCR,IAAI,CAACS,SAAL,CAAeS,iBAAf,CAAtC,EAEAX,QAAQ,CAACS,YAAD,CAAR,CACAX,gBAAgB,CAACa,iBAAD,CAAhB,CACA,CA3EF,GADD,CA+EA,CAlFF,EA1DD,CADD,CADD,CAmJA,CAvJD,CAyJA,cAAenB,CAAAA,GAAf","sourcesContent":["import React, { useState } from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\n\nimport Home from './panels/Home';\nimport Place from './panels/Place';\nimport Basket from './panels/Basket';\nimport Order from './panels/Order';\nimport Orders from './panels/Orders';\n\nimport './panels/App.css';\nimport kfc from './img/kfc.png';\nimport burger from './img/burger.png';\nimport mcdac from './img/mcdac.png';\nimport sub from './img/sub.png';\nimport OneTowar from './img/1.png';\nimport TwoTowar from './img/2.png';\nimport ThreeTowar from './img/3.png';\nimport FourTowar from './img/4.png';\n\n\nconst FOOD_AREAS = [{\n\tid: 'pizikiva-gallery',\n\tname: 'ТРЦ \"Им.Пыжикова\"',\n\titems: [{\n\t\tid: 'kfc',\n\t\tname: 'KFC',\n\t\tlink: '/place/pizikiva-gallery/kfc',\n\t\tdescription: 'Сеть ресторанов быстрого питания',\n\t\timage: kfc,\n\t\tfoods: [{\n\t\t\tid: 'classic',\n\t\t\timage: FourTowar,\n\t\t\tname: 'Классик',\n\t\t\tprice: 150,\n\t\t}, {\n\t\t\tid: 'fries',\n\t\t\timage: OneTowar,\n\t\t\tname: 'Картофель фри',\n\t\t\tprice: 50,\n\t\t}],\n\t}, {\n\t\tid: 'burger-king',\n\t\tname: 'Burger King',\n\t\tlink: '/place/pizikiva-gallery/burger-king',\n\t\tdescription: 'Сеть ресторанов быстрого питания',\n\t\timage: burger,\n\t\tfoods: [{\n\t\t\tid: 'OneTowar',\n\t\t\tname: 'Товар № 1',\n\t\t\tcomposition: 'Состав: по ГОСТу',\n\t\t\tprice: 630,\n\t\t\timage: OneTowar,\n\t\t}, {\n\t\t\tid: 'TwoTowar',\n\t\t\tname: 'Товар № 2',\n\t\t\tcomposition: 'Состав: по ГОСТу',\n\t\t\tprice: 450,\n\t\t\timage: TwoTowar,\n\t\t}, {\n\t\t\tid: 'ThreeTowar',\n\t\t\tname: 'Товар № 3',\n\t\t\tcomposition: 'Состав: по ГОСТу',\n\t\t\tprice: 800,\n\t\t\timage: ThreeTowar,\n\t\t}, {\n\t\t\tid: 'FourthTowar',\n\t\t\tname: 'Товар № 4',\n\t\t\tcomposition: 'Состав по ГОСТу',\n\t\t\tprice: 600,\n\t\t\timage: FourTowar,\n\t\t}],\n\t}, {\n\t\tid: 'macdac',\n\t\tname: 'McDonal\\'s',\n\t\tlink: '/place/pizikiva-gallery/macdac',\n\t\tdescription: 'Сеть ресторанов быстрого питания',\n\t\timage: mcdac,\n\t\tfoods: [{\n\t\t\tid: 'hamburger',\n\t\t\timage: TwoTowar,\n\t\t\tname: 'Гамбургер',\n\t\t\tprice: 50,\n\t\t}, {\n\t\t\tid: 'bigmac',\n\t\t\timage: ThreeTowar,\n\t\t\tname: 'Биг мак',\n\t\t\tprice: 200,\n\t\t}],\n\t}, {\n\t\tid: 'subway',\n\t\tname: 'SubWay',\n\t\tlink: '/place/pizikiva-gallery/subway',\n\t\timage: sub,\n\t\tdescription: 'Сеть ресторанов быстрого питания',\n\t\tfoods: [{\n\t\t\tid: 'melt-sub',\n\t\t\timage: ThreeTowar,\n\t\t\tname: 'Сабвей мелт',\n\t\t\tprice: 300,\n\t\t}, {\n\t\t\tid: 'day-sub',\n\t\t\timage: OneTowar,\n\t\t\tname: 'Саб дня',\n\t\t\tprice: 200,\n\t\t}],\n\t}],\n}];\n\nconst placesMap = FOOD_AREAS.reduce((result, area) => {\n\tarea.items.forEach(item => {\n\t\tresult[item.link] = item;\n\t});\n\n\treturn result;\n}, {});\n\nconst foodsMap = FOOD_AREAS.reduce((result, area) => {\n\tarea.items.forEach(item => {\n\t\titem.foods.forEach(food => {\n\t\t\tresult[food.id] = food;\n\t\t});\n\t});\n\n\treturn result;\n}, {});\n\nconst App = () => {\n\tconst [ orderStatuses, setOrderStatuses ] = useState(JSON.parse((localStorage.getItem('orderStatuses') || 'null')) || {});\n\tconst [ order, setOrder ] = useState(JSON.parse((localStorage.getItem('orders') || 'null')) || {});\n\tlocalStorage.getItem('settings') || localStorage.setItem('settings', JSON.stringify({'kfc': {'faster': true ,'time': '00:00', 'selfService': true}, 'macdak': {'faster': true ,'time': '00:00', 'selfService': true}, 'subway': {'faster': true ,'time': '00:00', 'selfService': true}, 'burger-king': {'faster': true ,'time': '00:00', 'selfService': true}}));\n\treturn (\n\t\t<Router>\n\t\t\t<Switch>\n\t\t\t\t<Route path=\"/\" exact>\n\t\t\t\t\t<Home foodAreas={FOOD_AREAS} order={order} />\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/order/:areaId/:itemId\" exact>\n\t\t\t\t\t<Order\n\t\t\t\t\t\tfoodAreas={FOOD_AREAS}\n\t\t\t\t\t\torder={order}\n\t\t\t\t\t\tsetActiveOrder={({ itemId }) => {\n\t\t\t\t\t\t\tconst nextStatuses = {...orderStatuses};\n\n\t\t\t\t\t\t\tnextStatuses[itemId] = 'ACTIVE';\n\n\t\t\t\t\t\t\tsetOrderStatuses(nextStatuses);\n\t\t\t\t\t\t\tlocalStorage.setItem('orderStatuses', JSON.stringify(nextStatuses));\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/basket/:areaId/:itemId\" exact>\n\t\t\t\t\t<Basket\n\t\t\t\t\t\tfoodAreas={FOOD_AREAS}\n\t\t\t\t\t\torder={order}\n\t\t\t\t\t/>\n\t\t\t\t</Route>\n\t\t\t\t<Route\n\t\t\t\t\tpath=\"/orders\"\n\t\t\t\t\texact\n\t\t\t\t>\n\t\t\t\t\t<Orders \n\t\t\t\t\t\torder={order}\n\t\t\t\t\t\torderStatuses={orderStatuses}\n\t\t\t\t\t\tfoodAreas={FOOD_AREAS}\n\t\t\t\t\t\tsetFinishedOrder={({ itemId }) => {\n\t\t\t\t\t\t\tconst nextStatuses = {...orderStatuses};\n\n\t\t\t\t\t\t\tnextStatuses[itemId] = 'DONE';\n\n\t\t\t\t\t\t\tsetOrderStatuses(nextStatuses);\n\t\t\t\t\t\t\tlocalStorage.setItem('orderStatuses', JSON.stringify(nextStatuses));\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tsetActiveOrder={({ itemId }) => {\n\t\t\t\t\t\t\tconst nextStatuses = {...orderStatuses};\n\n\t\t\t\t\t\t\tnextStatuses[itemId] = 'ACTIVE';\n\n\t\t\t\t\t\t\tsetOrderStatuses(nextStatuses);\n\t\t\t\t\t\t\tlocalStorage.setItem('orderStatuses', JSON.stringify(nextStatuses));\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tsetCanceledOrder={({ itemId }) => {\n\t\t\t\t\t\t\tconst nextStatuses = {...orderStatuses};\n\n\t\t\t\t\t\t\tnextStatuses[itemId] = 'CANCELED';\n\n\t\t\t\t\t\t\tsetOrderStatuses(nextStatuses);\n\t\t\t\t\t\t\tlocalStorage.setItem('orderStatuses', JSON.stringify(nextStatuses));\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</Route>\n\t\t\t\t<Route \n\t\t\t\t\tpath=\"/place/:area/:place\"\n\t\t\t\t\trender={routeProps => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Place\n\t\t\t\t\t\t\t\t{...routeProps}\n\t\t\t\t\t\t\t\titem={placesMap[routeProps.location.pathname]}\n\t\t\t\t\t\t\t\tarea={FOOD_AREAS[0]}\n\t\t\t\t\t\t\t\torder={order}\n\t\t\t\t\t\t\t\tonIncrementPosition={({ id, itemId, areaId }) => {\n\t\t\t\t\t\t\t\t\tconst updatedOrder = {...order};\n\n\t\t\t\t\t\t\t\t\tif (id in updatedOrder) {\n\t\t\t\t\t\t\t\t\t\tupdatedOrder[id].count++;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tupdatedOrder[id] = {\n\t\t\t\t\t\t\t\t\t\t\titem: foodsMap[id],\n\t\t\t\t\t\t\t\t\t\t\tcount: 1,\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tlet nextOrderStatuses = {...orderStatuses};\n\n\t\t\t\t\t\t\t\t\tif (Object.keys(nextOrderStatuses).length === 0) {\n\t\t\t\t\t\t\t\t\t\tFOOD_AREAS.forEach(area => {\n\t\t\t\t\t\t\t\t\t\t\tarea.items.forEach(item => {\n\t\t\t\t\t\t\t\t\t\t\t\titem.foods.forEach(food => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (food.id in order) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst status = item.id === itemId ? 'ACTIVE' : 'DONE';\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnextOrderStatuses[item.id] = status;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tconst serialized = JSON.stringify(updatedOrder);\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tlocalStorage.setItem('orders', serialized);\n\t\t\t\t\t\t\t\t\tlocalStorage.setItem('orderStatuses', JSON.stringify(nextOrderStatuses));\n\n\t\t\t\t\t\t\t\t\tsetOrder(updatedOrder);\n\t\t\t\t\t\t\t\t\tsetOrderStatuses(nextOrderStatuses);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonDecrementPosition={({ id, itemId, areaId }) => {\n\t\t\t\t\t\t\t\t\tconst updatedOrder = {...order};\n\n\t\t\t\t\t\t\t\t\tif (id in updatedOrder) {\n\t\t\t\t\t\t\t\t\t\tif (updatedOrder[id].count === 1) {\n\t\t\t\t\t\t\t\t\t\t\tdelete updatedOrder[id];\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tupdatedOrder[id].count--;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tlet nextOrderStatuses = {...orderStatuses};\n\n\t\t\t\t\t\t\t\t\tif (Object.keys(nextOrderStatuses).length === 0) {\n\t\t\t\t\t\t\t\t\t\tFOOD_AREAS.forEach(area => {\n\t\t\t\t\t\t\t\t\t\t\tarea.items.forEach(item => {\n\t\t\t\t\t\t\t\t\t\t\t\titem.foods.forEach(food => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (food.id in order) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst status = item.id === itemId ? 'ACTIVE' : 'DONE';\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnextOrderStatuses[item.id] = status;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tconst serialized = JSON.stringify(updatedOrder);\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tlocalStorage.setItem('orders', serialized);\n\t\t\t\t\t\t\t\t\tlocalStorage.setItem('orderStatuses', JSON.stringify(nextOrderStatuses));\n\n\t\t\t\t\t\t\t\t\tsetOrder(updatedOrder);\n\t\t\t\t\t\t\t\t\tsetOrderStatuses(nextOrderStatuses);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Switch>\n\t\t</Router>\n\t);\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}
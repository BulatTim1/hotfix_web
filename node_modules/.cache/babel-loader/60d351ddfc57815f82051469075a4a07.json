{"ast":null,"code":"import React,{useMemo}from'react';import{Link}from'react-router-dom';import accounting from'accounting';// import PropTypes from 'prop-types';\nimport edit from\"../img/edit.svg\";import'./place.css';import Orders from'./Orders';var Place=function Place(_ref){var item=_ref.item,order=_ref.order,onIncrementPosition=_ref.onIncrementPosition,onDecrementPosition=_ref.onDecrementPosition,area=_ref.area;var price=useMemo(function(){var foodIds=new Set((item.foods||[]).map(function(item){return item.id;}));var result=Object.values(order).filter(function(value){var id=value.item.id;return foodIds.has(id);}).reduce(function(result,value){var count=value.count,price=value.item.price;return result+parseInt(price)*parseInt(count);},0);alert(localStorage.getItem('orders'));return accounting.formatNumber(result,0,' ');},[order,item]);return/*#__PURE__*/React.createElement(\"div\",{className:\"Place\"},/*#__PURE__*/React.createElement(\"header\",{className:\"Place__header\"},/*#__PURE__*/React.createElement(\"aside\",{className:\"Place__trz\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"Place__head\"},/*#__PURE__*/React.createElement(Link,{to:\"/\",className:\"Place__logo\"},area.name)),/*#__PURE__*/React.createElement(Link,{to:\"/edit\",className:\"Place__change-tz\"},/*#__PURE__*/React.createElement(\"img\",{alt:\"change-profile\",src:edit})))),/*#__PURE__*/React.createElement(\"aside\",{className:\"Place__restoraunt\"},/*#__PURE__*/React.createElement(\"img\",{className:\"Place__restoraunt-logo\",alt:\"Fastfood logo\",src:item.image}),/*#__PURE__*/React.createElement(\"h2\",{className:\"Place__restoraunt-name\"},item.name),/*#__PURE__*/React.createElement(\"p\",{className:\"Place__restoraunt-type\"},item.description)),/*#__PURE__*/React.createElement(\"ul\",{className:\"Place__foods\"},item.foods.map(function(food){return/*#__PURE__*/React.createElement(\"li\",{className:\"Place__food\",key:food.id},/*#__PURE__*/React.createElement(\"div\",{className:\"Place__food-logo-wrapper\"},/*#__PURE__*/React.createElement(\"img\",{alt:\"food logo\",className:\"Place__food-logo\",src:food.image})),/*#__PURE__*/React.createElement(\"h3\",{className:\"Place__food-name\"},food.name),/*#__PURE__*/React.createElement(\"p\",{className:\"Place__food-composition\"},food.composition),/*#__PURE__*/React.createElement(\"div\",{className:\"Place__food-price\"},/*#__PURE__*/React.createElement(\"span\",{className:\".Place__food-price-price\"},\"\\u0426\\u0435\\u043D\\u0430: \",food.price,\"\\xA0\\xA0\"),/*#__PURE__*/React.createElement(\"button\",{className:\"Place__food-button\",onClick:function onClick(){onDecrementPosition({id:food.id,itemId:item.id,areaId:area.id});}},\"-\"),/*#__PURE__*/React.createElement(\"span\",null,\"\\xA0\",food.id in order?order[food.id].count:0,\"\\xA0\"),/*#__PURE__*/React.createElement(\"button\",{className:\"Place__food-button\",onClick:function onClick(){onIncrementPosition({id:food.id,itemId:item.id,areaId:area.id});}},\"+\")));})),localStorage.getItem('orders')!=\"{}\"||localStorage.getItem('orders')!=null&&/*#__PURE__*/React.createElement(\"footer\",{className:\"Place__footer\"},/*#__PURE__*/React.createElement(Link,{to:\"/basket/\".concat(area.id,\"/\").concat(item.id),className:\"Place__order\"},\"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437 (\",price,\")\")));};Place.defaultProps={item:{},onIncrementPosition:function onIncrementPosition(){},onDecrementPosition:function onDecrementPosition(){}};export default Place;","map":{"version":3,"sources":["E:/Projects/hotfix_web/src/panels/Place.js"],"names":["React","useMemo","Link","accounting","Orders","Place","item","order","onIncrementPosition","onDecrementPosition","area","price","foodIds","Set","foods","map","id","result","Object","values","filter","value","has","reduce","count","parseInt","alert","localStorage","getItem","formatNumber","name","edit","image","description","food","composition","itemId","areaId","defaultProps"],"mappings":"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","sourcesContent":["import React, { useMemo } from 'react';\nimport { Link } from 'react-router-dom';\nimport accounting from 'accounting';\n// import PropTypes from 'prop-types';\n\nimport edit from '../img/edit.svg';\nimport './place.css';\nimport Orders from './Orders';\n\n\nconst Place = ({ item, order, onIncrementPosition, onDecrementPosition, area }) => {\n  const price = useMemo(() => {\n    const foodIds = new Set((item.foods || []).map(item => item.id));\n\n    const result = Object.values(order)\n      .filter((value) => {\n        const { item: { id }} = value;\n\n        return foodIds.has(id);\n      })\n      .reduce((result, value) => {\n        const { count, item: { price }} = value;\n\n        return result + parseInt(price) * parseInt(count);\n      }, 0);\n  alert(localStorage.getItem('orders'))\n    return accounting.formatNumber(result, 0, ' ');\n  }, [ order, item ]);\n  return (\n    <div className=\"Place\">\n      <header className=\"Place__header\">\n        <aside className=\"Place__trz\">\n          <h1 className=\"Place__head\">\n            <Link to=\"/\" className=\"Place__logo\">\n              {area.name}\n            </Link>\n          </h1>\n          <Link to=\"/edit\" className=\"Place__change-tz\">\n          <img\n            alt=\"change-profile\"\n            src={edit}\n          />\n          </Link>\n        </aside>\n      </header>\n      <aside className=\"Place__restoraunt\">\n        <img\n          className=\"Place__restoraunt-logo\"\n          alt=\"Fastfood logo\"\n          src={item.image}\n        />\n        <h2\n          className=\"Place__restoraunt-name\"\n        >\n          {item.name}\n        </h2>\n        <p className=\"Place__restoraunt-type\">\n          {item.description}\n        </p>\n      </aside>\n      <ul className=\"Place__foods\">\n        {item.foods.map((food => (\n          <li\n            className=\"Place__food\"\n            key={food.id}\n          >\n            <div className=\"Place__food-logo-wrapper\">\n              <img\n                alt=\"food logo\"\n                className=\"Place__food-logo\"\n                src={food.image}\n              />\n            </div>\n            <h3 className=\"Place__food-name\">\n              {food.name}\n            </h3>\n            <p className=\"Place__food-composition\">\n              {food.composition}\n            </p>\n            <div className=\"Place__food-price\">\n              <span className=\".Place__food-price-price\">Цена: {food.price}&nbsp;&nbsp;</span>\n              <button\n                className=\"Place__food-button\"\n                onClick={() => {\n                  onDecrementPosition({ id: food.id, itemId: item.id, areaId: area.id });\n                }}\n              >\n                -\n              </button>\n              <span>&nbsp;{food.id in order ? order[food.id].count : 0}&nbsp;</span>\n              <button\n                className=\"Place__food-button\"\n                onClick={() => {\n                  onIncrementPosition({ id: food.id, itemId: item.id, areaId: area.id });\n                }}\n              >\n                +\n              </button>\n            </div>\n          </li>\n        )))}\n      </ul>\n      {localStorage.getItem('orders') != \"{}\" || localStorage.getItem('orders') != null &&\n      <footer className=\"Place__footer\">\n        <Link to={`/basket/${area.id}/${item.id}`} className=\"Place__order\">\n          Оформить заказ ({price})\n        </Link>\n      </footer>\n}\n    </div>\n  );\n};\n\nPlace.defaultProps = {\n  item: {},\n  onIncrementPosition: () => {},\n  onDecrementPosition: () => {},\n};\n\nexport default Place;\n"]},"metadata":{},"sourceType":"module"}